<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>The C Programming Language (K&amp;R) Notes</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>The C Programming Language (K&amp;R) Notes</h1>
<div id="toc" class="toc2">
<div id="toctitle">Index</div>
<ul class="sectlevel1">
<li><a href="#tracking">Tracking</a></li>
<li><a href="#errata">Errata</a></li>
<li><a href="#10_10_chapter_1_a_tutorial_introduction">[10/10] CHAPTER 1: A Tutorial Introduction</a>
<ul class="sectlevel2">
<li><a href="#1_1_getting_started">1.1 Getting Started</a></li>
<li><a href="#1_2_todo_vars_arithmetic_exprs">1.2 TODO vars arithmetic exprs</a></li>
<li><a href="#1_3_the_for_statement">1.3 The For Statement</a></li>
<li><a href="#1_4_symbolic_constants">1.4 Symbolic Constants</a>
<ul class="sectlevel3">
<li><a href="#block_scope">Block scope</a></li>
</ul>
</li>
<li><a href="#1_5_character_input_and_output">1.5 Character Input and Output</a>
<ul class="sectlevel3">
<li><a href="#1_5_1_file_copying">1.5.1 File Copying</a></li>
<li><a href="#operational_operators_precedence">Operational Operators Precedence</a></li>
<li><a href="#1_5_2_character_counting">1.5.2 Character Counting</a></li>
<li><a href="#1_5_3_line_counting">1.5.3 Line Counting</a>
<ul class="sectlevel4">
<li><a href="#errata_2">Errata</a></li>
</ul>
</li>
<li><a href="#1_5_4_word_counting">1.5.4 Word Counting</a></li>
<li><a href="#exercises">Exercises</a></li>
</ul>
</li>
<li><a href="#1_6_arrays">1.6 Arrays</a>
<ul class="sectlevel3">
<li><a href="#example_12_count_char_types">Example 12 count char types</a></li>
<li><a href="#exercise_1_13_count_char_types_histogram">Exercise 1-13 - count char types histogram</a></li>
<li><a href="#exercise_1_14_histogram_char_types">Exercise 1-14 histogram char types</a></li>
</ul>
</li>
<li><a href="#1_7_functions">1.7 Functions</a>
<ul class="sectlevel3">
<li><a href="#exercise_fahr_cels_functions">Exercise Fahr Cels Functions</a></li>
</ul>
</li>
<li><a href="#1_8_arguments_call_by_value">1.8 Arguments - Call by Value</a></li>
<li><a href="#1_9_character_arrays">1.9 Character Arrays</a>
<ul class="sectlevel3">
<li><a href="#exercise_16_longest_line">Exercise 16 longest line</a></li>
<li><a href="#exercise_17_print_lines_longer_than_n_chars">Exercise 17 print lines longer than N chars</a></li>
<li><a href="#exercise_18_remove_trailing_blanks_from_lines">Exercise 18 remove trailing blanks from lines</a></li>
<li><a href="#exercise_19_reverse_lines">Exercise 19 reverse lines</a></li>
</ul>
</li>
<li><a href="#1_10_external_variables_and_scope">1.10 External Variables and Scope</a></li>
<li><a href="#example_longest_line_external_variables">Example longest line external variables</a></li>
<li><a href="#exercise_20_detab">Exercise 20 - detab</a></li>
<li><a href="#exercise_21_entab">Exercise 21 - entab</a></li>
<li><a href="#exercise_22_wrap_lines">Exercise 22 - wrap lines</a></li>
<li><a href="#exercise_23_remove_comments">Exercise 23 - remove comments</a></li>
<li><a href="#exercise_24_check_syntax">Exercise 24 - check syntax</a></li>
</ul>
</li>
<li><a href="#6_12_chapter_2_types_operators_and_expressions">[6/12] CHAPTER 2: Types, Operators, and Expressions</a>
<ul class="sectlevel2">
<li><a href="#2_1_variable_names">2.1 Variable Names</a></li>
<li><a href="#2_2_data_types_and_sizes">2.2 Data Types and Sizes</a></li>
<li><a href="#exercise_01_limits">Exercise 01 - limits</a></li>
<li><a href="#2_3_constants_and_enums">2.3 Constants and Enums</a></li>
<li><a href="#2_4_declarations">2.4 Declarations</a></li>
<li><a href="#2_5_arithmetic_operators">2.5 Arithmetic Operators</a>
<ul class="sectlevel3">
<li><a href="#example_leap_years_and_enums">Example Leap Years and Enums</a></li>
</ul>
</li>
<li><a href="#2_6_relational_and_logical_operators">2.6 Relational and Logical Operators</a>
<ul class="sectlevel3">
<li><a href="#exercise_02_loop_no_ands_and_ors">Exercise 02 loop no ANDs and ORs</a></li>
</ul>
</li>
<li><a href="#2_7_type_conversions">2.7 Type Conversions</a>
<ul class="sectlevel3">
<li><a href="#example_atoi">Example atoi</a></li>
<li><a href="#example_case_conversion">Example case conversion</a></li>
<li><a href="#example_pseudo_rrand">Example Pseudo-Rrand</a></li>
<li><a href="#exercise_3_htoi">Exercise 3 - htoi</a></li>
</ul>
</li>
<li><a href="#2_8_increment_and_decrement_operators">2.8 Increment and Decrement Operators</a>
<ul class="sectlevel3">
<li><a href="#exercise_4_sequeeze_s2_from_s1">Exercise 4, sequeeze s2 from s1</a></li>
<li><a href="#exercise_5_any">Exercise 5, any</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2_9_bitwise_operators">2.9 Bitwise Operators</a>
<ul class="sectlevel2">
<li><a href="#getbits">getbits</a>
<ul class="sectlevel3">
<li><a href="#exercises_2">Exercises</a>
<ul class="sectlevel4">
<li><a href="#exercise_6_setbits">Exercise 6 - setbits</a></li>
<li><a href="#invert_bits_at_specific_positions">invert bits at specific positions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#end">End</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="tracking"><a class="link" href="#tracking">Tracking</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="errata"><a class="link" href="#errata">Errata</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://www.bien-programmer.fr/2ediffs.html">http://www.bien-programmer.fr/2ediffs.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="10_10_chapter_1_a_tutorial_introduction"><a class="link" href="#10_10_chapter_1_a_tutorial_introduction">[10/10] CHAPTER 1: A Tutorial Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>One method of communicating data between functions is for the calling function to provide a list of values, called arguments, to the function it calls.</p>
</div>
<div class="paragraph">
<p>A sequence of characters in double quotes, like "hello, world\n" , is called a character
string or string constant.</p>
</div>
<div class="paragraph">
<p>printfnever supplies a newline character automatically.</p>
</div>
<div class="paragraph">
<p>18:53:16        +Nistur | Ok, what kind of fucking screws do I need for this fucking case?
18:53:26 +barcelona1937 | the fucking ones
18:53:30 +barcelona1937 | clearly</p>
</div>
<div class="sect2">
<h3 id="1_1_getting_started"><a class="link" href="#1_1_getting_started">1.1 Getting Started</a></h3>
<div class="paragraph">
<p>Nothing much important&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="1_2_todo_vars_arithmetic_exprs"><a class="link" href="#1_2_todo_vars_arithmetic_exprs">1.2 TODO vars arithmetic exprs</a></h3>
<div class="paragraph">
<p>C, TODO as in many other languages, integer division truncates: any fractional part is discarded. Since 5 and 9 are integers. 5/9 would be truncated to zero and so all the Celsius temperatures
would TODO be reported as zero.</p>
</div>
<div class="paragraph">
<p>5 TODO is a constant.</p>
</div>
<div class="paragraph">
<p>If TODO an arithmetic operator has integer operands, an integer operation is performed. If an
arithmetic TODO operator has one floating-point operand and one integer operand, however, the
integer TODO will be converted to floating point before the operation is done. If we had written
(fahr-32) TODO , the 32 would be automatically converted to floating point.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>printf("%6.2f\n", 1.234);
  1.23</pre>
</div>
</div>
<div class="paragraph">
<p>So, TODO 6 means, 2 spaces of padding, 1, the dot, and the two decimal places, which means the 6 counts everything.
1.23 TODO are four characters. Then, just padd 2 spaces on the left.</p>
</div>
<div class="paragraph">
<p>\% TODO is not %, but %% is %.</p>
</div>
<div class="paragraph">
<p>printf("%15s\t%15s\n", "Fahrenheit", "Celsius") e é imprimido um único espaço no lugar do \t? Por que?</p>
</div>
<div class="literalblock">
<div class="content">
<pre>09:30:04  Fernando-Basso | I have printf("%15s\t%15s\n", "Fahrenheit", "Celcius");, and it
                         | prints one space for \t.
09:30:07  Fernando-Basso | Why?
09:31:30    Love4Boobies | What do you expect it to print?
09:32:11  Fernando-Basso | \t to print 8 spaces, or 4, but not 1 space.
09:32:26          mi6x3m | Fernando-Basso: What do you print to? The console?
09:32:41  Fernando-Basso | Yep, urxvt, tmux.
09:33:01          mi6x3m | well \t is not a displayable character, it's a control character.
09:33:09          mi6x3m | your output environment interprets it as 1 space
09:33:11    Love4Boobies | Fernando-Basso: A tab is usually rendered as space up to the next
                         | tabstop, not as a fixed number of spaces.
09:33:58    Love4Boobies | In this case, the tabsop is likely 8 so the next tabstop would be
                         | at 16---meaning you are one space away from it.
09:35:32    Love4Boobies | Note that you may very well be able to configure your terminal to
                         | have a tabstop every 3 characters, say.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_3_the_for_statement"><a class="link" href="#1_3_the_for_statement">1.3 The For Statement</a></h3>
<div class="paragraph">
<p><a href="./examples/chap01/04-fahr-cels-for.c">./examples/chap01/04-fahr-cels-for.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</div></td><td class="code"><span></span><span class="tok-c1">// Print Fahrenheit - Celsius table.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">fahr</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">300</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">fahr</span> <span class="tok-o">+</span> <span class="tok-mi">20</span><span class="tok-p">)</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%3d %6.1f</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">fahr</span><span class="tok-p">,</span> <span class="tok-p">(</span><span class="tok-mf">5.0</span> <span class="tok-o">/</span> <span class="tok-mf">9.0</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">-</span> <span class="tok-mi">32</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In any context where it is permissible to usethe value of some type, you can use a more complicated expression of that type (that results in a value of that type).</p>
</div>
</div>
<div class="sect2">
<h3 id="1_4_symbolic_constants"><a class="link" href="#1_4_symbolic_constants">1.4 Symbolic Constants</a></h3>
<div class="literalblock">
<div class="content">
<pre>#define &lt;name&gt; &lt;replacement list&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>There is no semicolon at the end! Thereafter, any occurrence of name (not in quotes and not part of another name) will be
<strong>replaced</strong> by the corresponding replacement text.</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/05-symbconst.c">./examples/chap01/05-symbconst.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define LOWER 0         </span><span class="tok-c1">// Lower limit of the table.</span>
<span class="tok-cp">#define UPPER 300       </span><span class="tok-c1">// Upper limit.</span>
<span class="tok-cp">#define STEP 20         </span><span class="tok-c1">// Step size.</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">fahr</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">LOWER</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">&lt;=</span> <span class="tok-n">UPPER</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">fahr</span> <span class="tok-o">+</span> <span class="tok-n">STEP</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%3d %6.1f</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">fahr</span><span class="tok-p">,</span> <span class="tok-p">(</span><span class="tok-mf">5.0</span> <span class="tok-o">/</span> <span class="tok-mf">9.0</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">-</span> <span class="tok-mi">32</span><span class="tok-p">));</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Symbolic constants are 'not' variables. And remember, <strong>no semicolon at the end of the define line</strong>.</p>
</div>
<div class="sect3">
<h4 id="block_scope"><a class="link" href="#block_scope">Block scope</a></h4>
<div class="paragraph">
<p>If you declare a variable outside the loop, it is acessible inside the loop. If, however, you declare it inside the block, then you cannot access it from outside the block.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</div></td><td class="code"><span></span><span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span> <span class="tok-c1">// declare i</span>
    <span class="tok-kt">int</span> <span class="tok-n">z</span><span class="tok-p">;</span> <span class="tok-c1">// declare z</span>

    <span class="tok-c1">// i is accessible inside for, declared outside.</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">2</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">+=</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// z is also accessed here, no problem.</span>
        <span class="tok-c1">// z was declared outside the block.</span>
        <span class="tok-n">z</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-p">;</span>

        <span class="tok-c1">// Declared inside the block, can&#39;t be used outside.</span>
        <span class="tok-kt">int</span> <span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span> <span class="tok-c1">// → 2.</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">z</span><span class="tok-p">);</span> <span class="tok-c1">// → 10.</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">);</span> <span class="tok-c1">// → Error. ‘k’ is does not exist in this scope.</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_5_character_input_and_output"><a class="link" href="#1_5_character_input_and_output">1.5 Character Input and Output</a></h3>
<div class="paragraph">
<p>A <strong>text stream</strong> is a sequence of characters divided into lines; each line consists of
zero or more characters followed by a newline character.</p>
</div>
<div class="paragraph">
<p><code>getchar</code> is the same as <code>getc(stdin)</code> (read <code>man 3 getc</code>).</p>
</div>
<div class="paragraph">
<p><code>getchar</code> reads the character as its <code>int</code> value. <code>putchar</code> prints the int value as a character.</p>
</div>
<div class="sect3">
<h4 id="1_5_1_file_copying"><a class="link" href="#1_5_1_file_copying">1.5.1 File Copying</a></h4>
<div class="paragraph">
<p><code>EOF</code> is defined in <code>stdio.h</code>, and it is -1 on my system.</p>
</div>
<div class="paragraph">
<p><code>!=</code> is a <a href="https://en.wikipedia.org/wiki/Relational_operator">relational operator</a>.</p>
</div>
<div class="paragraph">
<p>Is the type <code>char</code> an unsigned small int (greater than zero)?</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/06-getchar-while.c">./examples/chap01/06-getchar-while.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">();</span>

    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">);</span>
        <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">();</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="operational_operators_precedence"><a class="link" href="#operational_operators_precedence">Operational Operators Precedence</a></h4>
<div class="paragraph">
<p><code>!=</code> has higher precedence than <code>=</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c = getchar() != EOF</pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c = (getchar() != EOF)</pre>
</div>
</div>
<div class="paragraph">
<p>which has the undesired effect of setting c to 0 or 1, depending on whether or not the call of
getchar returned end of file.Therefore, you generally want</p>
</div>
<div class="literalblock">
<div class="content">
<pre>(c = getchar()) != EOF</pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/07-getchar-while-v2.c">./examples/chap01/07-getchar-while-v2.c</a></p>
</div>
<div class="listingblock">
<div class="title">getchar while I/O chars</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">();</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>0 is false is 1 is truthy.</p>
</div>
</div>
<div class="sect3">
<h4 id="1_5_2_character_counting"><a class="link" href="#1_5_2_character_counting">1.5.2 Character Counting</a></h4>
<div class="paragraph">
<p>++ and&#8201;&#8212;&#8201;can be used as prefix and postfix operators (but not as infix operators).</p>
</div>
<div class="paragraph">
<p>Use <code>%ld</code> to printf a long int.</p>
</div>
<div class="paragraph">
<p><code>printf</code> uses <code>%f</code> for both <code>float</code> and <code>double</code>.</p>
</div>
<div class="paragraph">
<p>If a <code>for</code> loop doesn&#8217;t need a real block, one can use a <strong>null statement</strong>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>for (nc = 0; getchar() != EOF; ++nc)
    ;</pre>
</div>
</div>
<div class="paragraph">
<p>Note the lone semicolon.</p>
</div>
<div class="paragraph">
<p>file:/examples/chap01/08-char-count-while.c[file:/examples/chap01/08-char-count-while.c]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-kt">long</span> <span class="tok-n">nc</span><span class="tok-p">;</span>

    <span class="tok-n">nc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
        <span class="tok-o">++</span><span class="tok-n">nc</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Number or characters read: %ld</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">nc</span><span class="tok-p">);</span>

    <span class="tok-c1">// heyRET is 4 chars (hey + newline)</span>
    <span class="tok-c1">// àRET is 3 chars...</span>
    <span class="tok-c1">// Also, newline is not EOF.</span>

    <span class="tok-c1">// If no input is given (only a C-d), zero is the result,</span>
    <span class="tok-c1">// which is the correct answer.</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>file:/examples/chap01/09-char-count-for.c[file:/examples/chap01/09-char-count-for.c]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-kt">double</span> <span class="tok-n">nc</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">nc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">nc</span><span class="tok-p">)</span>
        <span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Number or characters read: %0.f</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">nc</span><span class="tok-p">);</span>

    <span class="tok-c1">// heyRET is 4 chars (hey + newline)</span>
    <span class="tok-c1">// àRET is 3 chars...</span>
    <span class="tok-c1">// Also, newline is not EOF.</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="1_5_3_line_counting"><a class="link" href="#1_5_3_line_counting">1.5.3 Line Counting</a></h4>
<div class="paragraph">
<p>The standard library ensures that an input text stream appears as a sequence of lines, each terminated by a newline. Hence, counting lines is just counting newlines.</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/10-count-lines.c">./examples/chap01/10-count-lines.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cm">/* count lines in input */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">nl</span><span class="tok-p">;</span>

    <span class="tok-n">nl</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">nl</span><span class="tok-p">;</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">nl</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">//</span>
<span class="tok-c1">// NOTE: We hit Ctrl+D to signal EOF when testing from the terminal,</span>
<span class="tok-c1">// but if reading from a file, for instance, EOF happens when there</span>
<span class="tok-c1">// are no more lines to read from the file.</span>
<span class="tok-c1">//</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Careful not to use a single <code>=</code> when you intend to use <code>==</code>, because in a test, <code>foo = bar</code> is a valid expression.</p>
</div>
<div class="paragraph">
<p>'a' (single quotes) is a <strong>character constant</strong> and its value is the integer that represent "a" in the machine&#8217;s character set.</p>
</div>
<div class="paragraph">
<p><a href="./other/02-charconst.c">./other/02-charconst.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">n</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">n</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;a&#39;</span><span class="tok-p">;</span> <span class="tok-n">n</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;z&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">n</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%c&quot;</span><span class="tok-p">,</span> <span class="tok-n">n</span><span class="tok-p">);</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">//</span>
<span class="tok-c1">// NOTE: We hit Ctrl+D to signal EOF when testing from the terminal,</span>
<span class="tok-c1">// but if reading from a file, for instance, EOF happens when there</span>
<span class="tok-c1">// are no more lines to read from the file.</span>
<span class="tok-c1">//</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Escape sequences (<code>\n</code>, <code>\t</code>, etc) worth both inside single and double quotes, and count as a single character <sup class="footnote" id="_footnote_1">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="sect4">
<h5 id="errata_2"><a class="link" href="#errata_2">Errata</a></h5>
<div class="paragraph">
<p>Page 22</p>
</div>
<div class="paragraph">
<p>"&#8230;&#8203;on the other hand, '\n' is a string constant that happens to contain only one character."</p>
</div>
<div class="paragraph">
<p>Note that they use single quotes in '\n'. They probably meant "\n" (double quotes).</p>
</div>
<div class="paragraph">
<p>Exercise 1-8, 1-9, 1-10.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="1_5_4_word_counting"><a class="link" href="#1_5_4_word_counting">1.5.4 Word Counting</a></h4>
<div class="paragraph">
<p>Associates from right to left, so, this is not special syntax.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>nl = nw = nc = 0;</pre>
</div>
</div>
<div class="paragraph">
<p><code>&amp;&amp;</code> is higher precedence than <code>||</code>.</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/11-word-count.c">./examples/chap01/11-word-count.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define IN      1 </span><span class="tok-c1">// inside a word</span>
<span class="tok-cp">#define OUT     0 </span><span class="tok-c1">// outside a word</span>

<span class="tok-cm">/**</span>
<span class="tok-cm"> * Count lines, words and characters in input.</span>
<span class="tok-cm"> */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">nl</span><span class="tok-p">,</span> <span class="tok-n">nw</span><span class="tok-p">,</span> <span class="tok-n">nc</span><span class="tok-p">,</span> <span class="tok-n">state</span><span class="tok-p">;</span>

    <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>
    <span class="tok-n">nl</span> <span class="tok-o">=</span> <span class="tok-n">nw</span> <span class="tok-o">=</span> <span class="tok-n">nc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-o">++</span><span class="tok-n">nc</span><span class="tok-p">;</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-o">++</span><span class="tok-n">nl</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">state</span> <span class="tok-o">==</span> <span class="tok-n">OUT</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">IN</span><span class="tok-p">;</span>
            <span class="tok-o">++</span><span class="tok-n">nw</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d %d %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">nl</span><span class="tok-p">,</span> <span class="tok-n">nw</span><span class="tok-p">,</span> <span class="tok-n">nc</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercises"><a class="link" href="#exercises">Exercises</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/05-fahr-cels-for-rev.c">./exercises/chap01/05-fahr-cels-for-rev.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</div></td><td class="code"><span></span><span class="tok-c1">//</span>
<span class="tok-c1">// Exercise 1-5. Modify the temperature conversion program to print the table</span>
<span class="tok-c1">// in reverse order, that is, from 300 degrees to 0.</span>
<span class="tok-c1">//</span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">fahr</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-mi">300</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">fahr</span> <span class="tok-o">-</span> <span class="tok-mi">20</span><span class="tok-p">)</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%3d %6.1f</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">fahr</span><span class="tok-p">,</span> <span class="tok-p">(</span><span class="tok-mf">5.0</span> <span class="tok-o">/</span> <span class="tok-mf">9.0</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">-</span> <span class="tok-mi">32</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/06-getchar-eof-comp.c">./exercises/chap01/06-getchar-eof-comp.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</div></td><td class="code"><span></span><span class="tok-c1">// Exercsise 0-6. Verify that the expression getchar() != EOF is 0 or 1.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">;</span>
    <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">);</span>
    <span class="tok-c1">// 0 if it is EOF (we used !=).</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/07-value-of-eof.c">./exercises/chap01/07-value-of-eof.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-7. Write a program to print the value of EOF.</span>

<span class="tok-c1">// NOTE: On vim, with the cursor on &lt;stdio.h&gt;, hit `gf` and</span>
<span class="tok-c1">// search for EOF.</span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">EOF</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/08-count-whitespace.c">./exercises/chap01/08-count-whitespace.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-8. Write a program to count blanks, tabs, and newlines.</span>

<span class="tok-c1">// It seems they mean to count everything together, not as separate counters.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">count</span><span class="tok-p">;</span>

    <span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">count</span><span class="tok-p">;</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;Total count: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">count</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/09-squeeze-blanks.c">./exercises/chap01/09-squeeze-blanks.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-9. Write a program to copy its input to its output, replacing</span>
<span class="tok-c1">// each string of one or more blanks by a single blank.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define TRUE 1</span>
<span class="tok-cp">#define FALSE 0</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">is_blank</span><span class="tok-p">;</span>

    <span class="tok-n">is_blank</span> <span class="tok-o">=</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">is_blank</span> <span class="tok-o">==</span> <span class="tok-n">FALSE</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-n">is_blank</span> <span class="tok-o">=</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">);</span>
            <span class="tok-n">is_blank</span> <span class="tok-o">=</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="f/exercises/chap01/10-visual-control-chars.c">f/exercises/chap01/10-visual-control-chars.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-10. Write a program to copy its input to its output, replacing each</span>
<span class="tok-c1">// tab by \t , each backspace by \b , and each backslash by \\ . This makes tabs</span>
<span class="tok-c1">// and backspaces visible in an unambiguous way.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;</span><span class="tok-se">\\</span><span class="tok-s">t&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\b&#39;</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;</span><span class="tok-se">\\</span><span class="tok-s">b&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\\&#39;</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;</span><span class="tok-se">\\</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">else</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%c&quot;</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">// \b can be inserted by hitting Ctrl+Backspace or Ctrl+h.</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>1-11: files very lager that would overflow the variables, corrupt data.</p>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/12-word-per-line.c">./exercises/chap01/12-word-per-line.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-12. Write a program that prints its input one word per line.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define BLANK 1</span>
<span class="tok-cp">#define NON_BLANK 0</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">prev</span><span class="tok-p">;</span>

    <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">NON_BLANK</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">prev</span> <span class="tok-o">==</span> <span class="tok-n">NON_BLANK</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">BLANK</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">NON_BLANK</span><span class="tok-p">;</span>
            <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_6_arrays"><a class="link" href="#1_6_arrays">1.6 Arrays</a></h3>
<div class="paragraph">
<p>All mean the same thing:</p>
</div>
<div class="paragraph">
<p>The first one allows you to easily see the interval!</p>
</div>
<div class="listingblock">
<div class="content">
<pre>`'0' &lt;= c &amp;&amp; c &lt;= '9'`
`'9' &gt;= c &amp;&amp; c &gt;= '0'`
`c &gt;= '0' &amp;&amp; c &lt;= '9'`

'0' = 48, '1' = 49
'0' - '1'
48  - 49 = 1.</pre>
</div>
</div>
<div class="paragraph">
<p>An array subscript can be any integer expression (<code>5</code>, <code>i</code>, <code>i + 3</code>, c - '0').</p>
</div>
<div class="sect3">
<h4 id="example_12_count_char_types"><a class="link" href="#example_12_count_char_types">Example 12 count char types</a></h4>
<div class="paragraph">
<p><a href="./examples/chap01/12-count-char-types.c">./examples/chap01/12-count-char-types.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cm">/* count digits, white space, others */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">ndigit</span><span class="tok-p">[</span><span class="tok-mi">10</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">};</span> <span class="tok-c1">// initialize all positions to zero.</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">nwhite</span><span class="tok-p">,</span> <span class="tok-n">nother</span><span class="tok-p">;</span>

    <span class="tok-n">nwhite</span> <span class="tok-o">=</span> <span class="tok-n">nother</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;9&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">ndigit</span><span class="tok-p">[</span><span class="tok-n">c</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;0&#39;</span><span class="tok-p">];</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">nwhite</span><span class="tok-p">;</span>
        <span class="tok-k">else</span>
            <span class="tok-o">++</span><span class="tok-n">nother</span><span class="tok-p">;</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;digits =&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot; %d&quot;</span><span class="tok-p">,</span> <span class="tok-n">ndigit</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]);</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;, white space = %d, other = %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">nwhite</span><span class="tok-p">,</span> <span class="tok-n">nother</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_1_13_count_char_types_histogram"><a class="link" href="#exercise_1_13_count_char_types_histogram">Exercise 1-13 - count char types histogram</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/13-histogram-horizontal.c">./exercises/chap01/13-histogram-horizontal.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define LIM 15</span>

<span class="tok-cp">#define IN 1</span>
<span class="tok-cp">#define OUT 0</span>

<span class="tok-cm">/* count digits, white space, others */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">,</span> <span class="tok-n">state</span><span class="tok-p">,</span> <span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">LIM</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">};</span> <span class="tok-c1">// initialize all positions to the nul byte.</span>

    <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>

    <span class="tok-c1">// Assumes user always hits enter to send input.</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">state</span> <span class="tok-o">==</span> <span class="tok-n">IN</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-o">++</span><span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">n_chars_word</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">];</span>
                <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
                <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">IN</span><span class="tok-p">;</span>
            <span class="tok-o">++</span><span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%2d: &quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">k</span> <span class="tok-o">&lt;</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">];</span> <span class="tok-o">++</span><span class="tok-n">k</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;#&quot;</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/13b-histogram-vertical.c">./exercises/chap01/13b-histogram-vertical.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define LIM 15</span>

<span class="tok-cp">#define IN 1</span>
<span class="tok-cp">#define OUT 0</span>

<span class="tok-cm">/* Count word sizes and prints histogram. */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">,</span> <span class="tok-n">state</span><span class="tok-p">,</span> <span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">LIM</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">};</span> <span class="tok-c1">// initialize all positions to the nul byte.</span>

    <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>

    <span class="tok-c1">// Assumes user always hits enter to send input.</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">state</span> <span class="tok-o">==</span> <span class="tok-n">IN</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-o">++</span><span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">n_chars_word</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">];</span>
                <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
                <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">IN</span><span class="tok-p">;</span>
            <span class="tok-o">++</span><span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3d</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span>

    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">k</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">k</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">])</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-k">else</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;.&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/13c-histogram-vertical.c">./exercises/chap01/13c-histogram-vertical.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-13. Write a program to print a histogram of the lengths of words</span>
<span class="tok-c1">// in its input. It is easy to draw the histogram with the bars horizontal; a</span>
<span class="tok-c1">// vertical orientation is more challenging.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define LIM 15</span>

<span class="tok-cp">#define IN 1</span>
<span class="tok-cp">#define OUT 0</span>

<span class="tok-cm">/* Count word sizes and prints histogram. */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">,</span> <span class="tok-n">state</span><span class="tok-p">,</span> <span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">LIM</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">};</span> <span class="tok-c1">// initialize all positions to the nul byte.</span>

    <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>

    <span class="tok-c1">// Assumes user always hits enter to send input.</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">state</span> <span class="tok-o">==</span> <span class="tok-n">IN</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-o">++</span><span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">n_chars_word</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">];</span>
                <span class="tok-n">n_chars_word</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
                <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">OUT</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">state</span> <span class="tok-o">=</span> <span class="tok-n">IN</span><span class="tok-p">;</span>
            <span class="tok-o">++</span><span class="tok-n">n_chars_word</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3d</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">);</span>

    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">LIM</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-o">--</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">k</span> <span class="tok-o">&lt;</span> <span class="tok-n">LIM</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">k</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">&lt;=</span> <span class="tok-n">lengths</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">])</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-k">else</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;.&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_1_14_histogram_char_types"><a class="link" href="#exercise_1_14_histogram_char_types">Exercise 1-14 histogram char types</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/14-hist-chars-types.c">./exercises/chap01/14-hist-chars-types.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-14. Write a program to print a histogram of the frequencies of</span>
<span class="tok-c1">// different characters in its input.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAX_NUM_CHARS 12</span>
<span class="tok-cp">#define NUM_TYPES 3</span>
<span class="tok-cp">#define TYPE_BLANK 0</span>
<span class="tok-cp">#define TYPE_DIGIT 1</span>
<span class="tok-cp">#define TYPE_OTHER 2    </span><span class="tok-c1">// letters, punctuation, etc.</span>


<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">;</span>

    <span class="tok-kt">int</span> <span class="tok-n">hist</span><span class="tok-p">[</span><span class="tok-n">NUM_TYPES</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{</span><span class="tok-mi">0</span><span class="tok-p">};</span> <span class="tok-c1">// initiaize all positions to zero.</span>

    <span class="tok-c1">// Assumes user always hits enter to send input.</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">hist</span><span class="tok-p">[</span><span class="tok-n">TYPE_BLANK</span><span class="tok-p">];</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&lt;=</span> <span class="tok-n">c</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;9&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">++</span><span class="tok-n">hist</span><span class="tok-p">[</span><span class="tok-n">TYPE_DIGIT</span><span class="tok-p">];</span>
        <span class="tok-k">else</span>
            <span class="tok-o">++</span><span class="tok-n">hist</span><span class="tok-p">[</span><span class="tok-n">TYPE_OTHER</span><span class="tok-p">];</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">MAX_NUM_CHARS</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-o">--</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">k</span> <span class="tok-o">&lt;</span> <span class="tok-n">NUM_TYPES</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">k</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">&lt;=</span> <span class="tok-n">hist</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">])</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-k">else</span> <span class="tok-p">{</span>
                <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%3c</span><span class="tok-se">\t</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-sc">&#39;.&#39;</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;Blanks</span><span class="tok-se">\t</span><span class="tok-s">Digits</span><span class="tok-se">\t</span><span class="tok-s">Other</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_7_functions"><a class="link" href="#1_7_functions">1.7 Functions</a></h3>
<div class="paragraph">
<p>With properly designed functions, itis possible to ignore 'how' a job is done; knowing 'what' is done is sufficient.</p>
</div>
<div class="paragraph">
<p>The word “name” is used with the same meaning as “identifier”.</p>
</div>
<div class="paragraph">
<p><strong>formal arguments</strong> are the names used when declaring a funtion. <strong>actual arguments</strong> are the atual values passed when invoking function.</p>
</div>
<div class="paragraph">
<p>Main returns a value to the environment in which it is running. 0 means “normal” termination (no problems or errors whatsoever) and any other value signals some sort of error.</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/13-power.c">./examples/chap01/13-power.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">power</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">base</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">exp</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d %d %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">power</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">),</span> <span class="tok-n">power</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">power</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">base</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">exp</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">acc</span><span class="tok-p">;</span>

    <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;=</span> <span class="tok-n">exp</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-n">acc</span> <span class="tok-o">*</span> <span class="tok-n">base</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">acc</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="exercise_fahr_cels_functions"><a class="link" href="#exercise_fahr_cels_functions">Exercise Fahr Cels Functions</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/15-fahr-cels-functs.c">./exercises/chap01/15-fahr-cels-functs.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</div></td><td class="code"><span></span><span class="tok-c1">//</span>
<span class="tok-c1">// Exercise 1-15. Write a program to print the corresponding Celsius to</span>
<span class="tok-c1">// Fahrenheit table.</span>
<span class="tok-c1">//</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">float</span> <span class="tok-nf">fahr2cels</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">fahr</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-nf">print_table</span><span class="tok-p">(</span><span class="tok-kt">short</span> <span class="tok-n">lower</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">upper</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">step</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">short</span> <span class="tok-n">lower</span><span class="tok-p">,</span> <span class="tok-n">upper</span><span class="tok-p">,</span> <span class="tok-n">step</span><span class="tok-p">;</span>

    <span class="tok-n">lower</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">100</span><span class="tok-p">;</span>      <span class="tok-cm">/* lower limit of temperature scale */</span>
    <span class="tok-n">upper</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>    <span class="tok-cm">/* upper limit */</span>
    <span class="tok-n">step</span>  <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-p">;</span>     <span class="tok-cm">/* step size */</span>

    <span class="tok-n">print_table</span><span class="tok-p">(</span><span class="tok-n">lower</span><span class="tok-p">,</span> <span class="tok-n">upper</span><span class="tok-p">,</span> <span class="tok-n">step</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-cm">/**</span>
<span class="tok-cm"> * Given a temperature in fahrenheit, return its celsius equivalent.</span>
<span class="tok-cm"> */</span>
<span class="tok-kt">float</span> <span class="tok-nf">fahr2cels</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">fahr</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-p">(</span><span class="tok-mf">5.0</span> <span class="tok-o">/</span> <span class="tok-mf">9.0</span><span class="tok-p">)</span> <span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">-</span> <span class="tok-mf">32.0</span><span class="tok-p">);</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">print_table</span><span class="tok-p">(</span><span class="tok-kt">short</span> <span class="tok-n">lower</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">upper</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">step</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">float</span> <span class="tok-n">fahr</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%15s%15s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Fahrenheit&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Celcius&quot;</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;------------------------------</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>

    <span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">lower</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">fahr</span> <span class="tok-o">&lt;=</span> <span class="tok-n">upper</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%15.0f%15.2f</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">fahr</span><span class="tok-p">,</span> <span class="tok-n">fahr2cels</span><span class="tok-p">(</span><span class="tok-n">fahr</span><span class="tok-p">));</span>
        <span class="tok-n">fahr</span> <span class="tok-o">=</span> <span class="tok-n">fahr</span> <span class="tok-o">+</span> <span class="tok-n">step</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_8_arguments_call_by_value"><a class="link" href="#1_8_arguments_call_by_value">1.8 Arguments - Call by Value</a></h3>
<div class="paragraph">
<p><a href="./examples/chap01/14-power-by-value.c">./examples/chap01/14-power-by-value.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">power</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">base</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">exp</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%8d %8d %8d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">power</span><span class="tok-p">(</span><span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">),</span> <span class="tok-n">power</span><span class="tok-p">(</span><span class="tok-o">-</span><span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">power</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">base</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">exp</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">acc</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">exp</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-o">--</span><span class="tok-n">exp</span><span class="tok-p">)</span>
        <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-n">acc</span> <span class="tok-o">*</span> <span class="tok-n">base</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">acc</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_9_character_arrays"><a class="link" href="#1_9_character_arrays">1.9 Character Arrays</a></h3>
<div class="paragraph">
<p>When the name of an array is used as an argument, the value passed to the function is the location or address of the beginning of the array - there is no copying of array elements. By subscripting this value, the function can access and alter any argument of the array.</p>
</div>
<div class="paragraph">
<p>You don&#8217;t need <code>string.h</code> to use <code>printf("%s", str)</code>.</p>
</div>
<div class="paragraph">
<p><a href="./examples/chap01/15-longest-line-char-array-ref.c">./examples/chap01/15-longest-line-char-array-ref.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</div></td><td class="code"><span></span><span class="tok-c1">// while (there&#39;s another line)</span>
<span class="tok-c1">//     if (it&#39;s longer than the previous longest)</span>
<span class="tok-c1">//         (save it)</span>
<span class="tok-c1">//         (save its length)</span>
<span class="tok-c1">// print longest line</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLINE 120 </span><span class="tok-c1">// Maximum input line length.</span>

<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">maxline</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-nf">copy</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">from</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">to</span><span class="tok-p">[]);</span>

<span class="tok-c1">// Print the longest input input line.</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>                    <span class="tok-c1">// current line length</span>
    <span class="tok-kt">int</span> <span class="tok-n">max</span><span class="tok-p">;</span>                    <span class="tok-c1">// maximum lenght so far</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>         <span class="tok-c1">// current input line</span>
    <span class="tok-kt">char</span> <span class="tok-n">longest</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>      <span class="tok-c1">// longest line saved here</span>

    <span class="tok-n">max</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">getline</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLINE</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">&gt;</span> <span class="tok-n">max</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">max</span> <span class="tok-o">=</span> <span class="tok-n">len</span><span class="tok-p">;</span>
            <span class="tok-n">copy</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">longest</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// there was a line</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">max</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%s&quot;</span><span class="tok-p">,</span> <span class="tok-n">longest</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">// `s` is a reference. The original &quot;variabl&quot; in the calling</span>
<span class="tok-c1">// function is filled with characters.</span>
<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lim</span> <span class="tok-o">-</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">copy</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">from</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">to</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">to</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">from</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">])</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="exercise_16_longest_line"><a class="link" href="#exercise_16_longest_line">Exercise 16 longest line</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/16-print-lines.c">./exercises/chap01/16-print-lines.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-16. Revise the main routine of the longest-line program so it</span>
<span class="tok-c1">// will correctly print the length of arbitrary long input lines, and as much</span>
<span class="tok-c1">// as possible of the text.</span>
<span class="tok-c1">// If the line is longer than max length, ignore only the exceeding characters.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLINE 30 </span><span class="tok-c1">// Maximum input line length.</span>

<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">maxline</span><span class="tok-p">);</span>

<span class="tok-c1">// Print the longest input input line.</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>                    <span class="tok-c1">// current line length</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>         <span class="tok-c1">// current input line</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">getline</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLINE</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;len %3d: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">// `s` is a reference. The original &quot;variable&quot; in the calling</span>
<span class="tok-c1">// function is filled with characters.</span>
<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lim</span> <span class="tok-o">-</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-c1">// In the else so we don&#39;t accidentaly flush the next line.</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Consumes the rest of the line to flush the input buffer.</span>
        <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
            <span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>


    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_17_print_lines_longer_than_n_chars"><a class="link" href="#exercise_17_print_lines_longer_than_n_chars">Exercise 17 print lines longer than N chars</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/17-print-lines-longer-than.c">./exercises/chap01/17-print-lines-longer-than.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-17. Write a program to print all input lines that are longer than</span>
<span class="tok-c1">// 80 characters.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLINE 500 </span><span class="tok-c1">// Maximum input line length.</span>
<span class="tok-cp">#define THRESHOLD 80 </span><span class="tok-c1">// Print lines at least as long as this value.</span>

<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">maxline</span><span class="tok-p">);</span>

<span class="tok-c1">// Print lines greater than or equal to THRESHOLD characters.</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>                    <span class="tok-c1">// current line length</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>         <span class="tok-c1">// current input line</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">getline</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLINE</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">&gt;=</span> <span class="tok-n">THRESHOLD</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;len %3d: %s</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">// `s` is a reference. The original &quot;variable&quot; in the calling</span>
<span class="tok-c1">// function is filled with characters.</span>
<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lim</span> <span class="tok-o">-</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-c1">// In the else so we don&#39;t accidentaly flush the next line.</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Consumes the rest of the line to flush the input buffer.</span>
        <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
            <span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>


    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_18_remove_trailing_blanks_from_lines"><a class="link" href="#exercise_18_remove_trailing_blanks_from_lines">Exercise 18 remove trailing blanks from lines</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap01/18-trim-l-r.c">./exercises/chap01/18-trim-l-r.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-18. Write a program to remove trailing blanks and tabs from each</span>
<span class="tok-c1">// line of input, and to delete entirely blank lines.</span>

<span class="tok-c1">// Only handles ASCII correctly.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLINE 500 </span><span class="tok-c1">// Maximum input line length.</span>

<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">maxline</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">trim_r</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>
<span class="tok-kt">int</span> <span class="tok-nf">trim_l</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>
<span class="tok-kt">int</span> <span class="tok-nf">trim</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>                    <span class="tok-c1">// current line length</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>         <span class="tok-c1">// current input line</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">getline</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLINE</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">trim_r</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">);</span>
        <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">trim_l</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">);</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">&gt;</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%03d: %s&quot;</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-c1">// `s` is a reference. The original &quot;variable&quot; in the calling</span>
<span class="tok-c1">// function is filled with characters.</span>
<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lim</span> <span class="tok-o">-</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-c1">// In the else so we don&#39;t accidentaly flush the next line.</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Consumes the rest of the line to flush the input buffer.</span>
        <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">getchar</span><span class="tok-p">()</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
            <span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>


    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">trim_r</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-kt">short</span> <span class="tok-n">has_nl</span><span class="tok-p">;</span>

    <span class="tok-n">has_nl</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-c1">// 0 is false, 1 is true.</span>

    <span class="tok-c1">// &#39;bar \n\0&#39;</span>

    <span class="tok-c1">// Run backwards first.</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">len</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-o">--</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// If it is the default/original string terminator.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">continue</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-c1">// For now, we&#39;ll just override everthing from the end of the</span>
        <span class="tok-c1">// string to the first non non-blank (backwards) with NUL.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">has_nl</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-c1">// Then we must have found a non-blank char.</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">has_nl</span><span class="tok-p">)</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">trim_l</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">shift</span><span class="tok-p">;</span>
    <span class="tok-kt">short</span> <span class="tok-n">is_shifting</span><span class="tok-p">;</span>

    <span class="tok-n">is_shifting</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">shift</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span> <span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">len</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-o">!</span><span class="tok-n">is_shifting</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">shift</span> <span class="tok-o">+=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">is_shifting</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span> <span class="tok-o">-</span> <span class="tok-n">shift</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">];</span>
            <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">-</span> <span class="tok-n">shift</span><span class="tok-p">)</span>  <span class="tok-o">&lt;=</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">len</span> <span class="tok-o">-</span> <span class="tok-n">shift</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the object of the lib:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gcc -std=c99 -Wall -pedantic -fPIC -o lib/line.o -c ./lib/line.c</pre>
</div>
</div>
<div class="paragraph">
<p>Create the shared object:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gcc -shared -o ./lib/libmyline.so ./lib/line.o</pre>
</div>
</div>
<div class="paragraph">
<p>Compile main program with the libs (not that is 'l' 'myline' (without 'lib'):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gcc -Wall -L./lib -o ./devel devel.c -lmyline</pre>
</div>
</div>
<div class="paragraph">
<p>Run te program telling it where the lib is to be found:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>LD_LIBRARY_PATH=./lib ./devel</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_19_reverse_lines"><a class="link" href="#exercise_19_reverse_lines">Exercise 19 reverse lines</a></h4>
<div class="paragraph">
<p>Remember that even though strings start at position zero, the zeroth character produces length 1 (not zero). So, "bar\n\0" is:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="./exercises/chap01/19-reverse.c">./exercises/chap01/19-reverse.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-19. Write a function reverse(s) that reverses the character</span>
<span class="tok-c1">// string s . Use it to write a program that reverses its input a line at a</span>
<span class="tok-c1">// time.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;lib/line.h&quot;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 200</span>

<span class="tok-kt">void</span> <span class="tok-nf">revstr</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLEN</span><span class="tok-p">];</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">get_line</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLEN</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">revstr</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">);</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%s&quot;</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">revstr</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">tmpchr</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">j</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-n">j</span> <span class="tok-o">=</span> <span class="tok-n">len</span> <span class="tok-o">-</span> <span class="tok-mi">2</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-p">);</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-o">--</span><span class="tok-n">j</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">tmpchr</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">];</span>
        <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">j</span><span class="tok-p">];</span>
        <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">j</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">tmpchr</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="1_10_external_variables_and_scope"><a class="link" href="#1_10_external_variables_and_scope">1.10 External Variables and Scope</a></h3>
<div class="paragraph">
<p>AUTOMATIC VARIABLES = local variables: they are created when the function is executed and disappear when the function exits.
EXTERNAL VARIABLES = global variables.</p>
</div>
</div>
<div class="sect2">
<h3 id="example_longest_line_external_variables"><a class="link" href="#example_longest_line_external_variables">Example longest line external variables</a></h3>
<div class="paragraph">
<p><a href="./examples/chap01/16-longest-line-extern.c">./examples/chap01/16-longest-line-extern.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLINE 1000 </span><span class="tok-cm">/* maximum input line size */</span><span class="tok-cp"></span>

<span class="tok-c1">// EXTERNAL (OR GLOBAL) VARIABLES.</span>
<span class="tok-kt">int</span> <span class="tok-n">max</span><span class="tok-p">;</span>                    <span class="tok-cm">/* maximum length seen so far */</span>
<span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>         <span class="tok-cm">/* current input line */</span>
<span class="tok-kt">char</span> <span class="tok-n">longest</span><span class="tok-p">[</span><span class="tok-n">MAXLINE</span><span class="tok-p">];</span>      <span class="tok-cm">/* longest line saved here */</span>

<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-nf">copy</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">);</span>

<span class="tok-cm">/* print longest input line; specialized version */</span>
<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">()</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>
    <span class="tok-k">extern</span> <span class="tok-kt">int</span> <span class="tok-n">max</span><span class="tok-p">;</span>
    <span class="tok-k">extern</span> <span class="tok-kt">char</span> <span class="tok-n">longest</span><span class="tok-p">[];</span>

    <span class="tok-n">max</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">getline</span><span class="tok-p">())</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">&gt;</span> <span class="tok-n">max</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">max</span> <span class="tok-o">=</span> <span class="tok-n">len</span><span class="tok-p">;</span>
            <span class="tok-n">copy</span><span class="tok-p">();</span>
        <span class="tok-p">}</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">max</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-cm">/* there was a line */</span>
        <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%s&quot;</span><span class="tok-p">,</span> <span class="tok-n">longest</span><span class="tok-p">);</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-cm">/* getline: specialized version */</span>
<span class="tok-kt">int</span> <span class="tok-nf">getline</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-k">extern</span> <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[];</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">MAXLINE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span>
            <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
                <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-cm">/* copy: specialized version */</span>
<span class="tok-kt">void</span> <span class="tok-nf">copy</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-k">extern</span> <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-n">longest</span><span class="tok-p">[];</span>
    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">longest</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">])</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>“If the definition of the external variable occurs in the source file before its use in a particular function, then there is no need for an extern declaration in the function.”</p>
</div>
</div>
<div class="sect2">
<h3 id="exercise_20_detab"><a class="link" href="#exercise_20_detab">Exercise 20 - detab</a></h3>
<div class="paragraph">
<p><a href="./exercises/chap01/20-detab.c">./exercises/chap01/20-detab.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-20. Write a program detab that replaces tabs in the input with</span>
<span class="tok-c1">// the proper number of blanks to space to the next tab stop. Assume a fixed</span>
<span class="tok-c1">// set of tab stops, say every n columns. Should n be a variable or a symbolic</span>
<span class="tok-c1">// parameter?</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;lib/line.h&quot;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 200      </span><span class="tok-c1">// Max input length allowed.</span>
<span class="tok-cp">#define TABSIZE 8       </span><span class="tok-c1">// 8 spaces for each tab size.</span>

<span class="tok-kt">int</span> <span class="tok-nf">detab_v1</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>
<span class="tok-kt">int</span> <span class="tok-nf">detab_v2</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLEN</span><span class="tok-p">];</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">get_line</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLEN</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">detab_v1</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">);</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;len %d, line %s&quot;</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">detab_v1</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-kt">int</span> <span class="tok-n">pos_dst</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">pos_src</span><span class="tok-p">;</span>

    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">pos_dst</span> <span class="tok-o">=</span> <span class="tok-n">len</span> <span class="tok-o">+</span> <span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-n">pos_src</span> <span class="tok-o">=</span> <span class="tok-n">len</span><span class="tok-p">;</span>
            <span class="tok-c1">// Shift the actuall chars.</span>
            <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">pos_src</span> <span class="tok-o">&gt;</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_dst</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_src</span><span class="tok-p">];</span>
                <span class="tok-o">--</span><span class="tok-n">pos_dst</span><span class="tok-p">;</span>
                <span class="tok-o">--</span><span class="tok-n">pos_src</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
            <span class="tok-c1">// Fills in the “emptied” space.</span>
            <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">pos_dst</span> <span class="tok-o">&gt;=</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_dst</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;-&#39;</span><span class="tok-p">;</span>
                <span class="tok-o">--</span><span class="tok-n">pos_dst</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
            <span class="tok-n">len</span> <span class="tok-o">+=</span> <span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">len</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">detab_v2</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">destination</span><span class="tok-p">,</span> <span class="tok-n">source</span><span class="tok-p">;</span>

    <span class="tok-c1">// Loop through array of characters</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Find tab chars</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-c1">// Replace tab with a whitespace</span>
            <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">;</span>

            <span class="tok-c1">// Loop the array again (this time backwards), shifting</span>
            <span class="tok-c1">// everything that comes after the tab char TABSIZE - 1</span>
            <span class="tok-c1">// positions to the right</span>
            <span class="tok-n">destination</span> <span class="tok-o">=</span> <span class="tok-n">len</span> <span class="tok-o">+</span> <span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">destination</span> <span class="tok-o">&gt;</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">source</span> <span class="tok-o">=</span> <span class="tok-n">destination</span> <span class="tok-o">-</span> <span class="tok-p">(</span><span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
                <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-n">source</span><span class="tok-p">)</span> <span class="tok-o">&gt;</span> <span class="tok-n">i</span><span class="tok-p">)</span>
                    <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">destination</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">source</span><span class="tok-p">];</span>
                <span class="tok-k">else</span>
                    <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">destination</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">;</span>

                <span class="tok-o">--</span><span class="tok-n">destination</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>

            <span class="tok-c1">// Increment length by TABSIZE - 1</span>
            <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">len</span> <span class="tok-o">+</span> <span class="tok-p">(</span><span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>

        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">len</span><span class="tok-p">;</span>

<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercise_21_entab"><a class="link" href="#exercise_21_entab">Exercise 21 - entab</a></h3>
<div class="paragraph">
<p><a href="./exercises/chap01/21-entab.c">./exercises/chap01/21-entab.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-21. Write a program entab that replaces strings of blanks by the</span>
<span class="tok-c1">// minimum number of tabs and blanks to achieve the same spacing. Use the same</span>
<span class="tok-c1">// tab stops as for detab .  When either a tab or a single blank would suffice</span>
<span class="tok-c1">// to reach a tab stop, which should be given preference?</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;lib/line.h&quot;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 200      </span><span class="tok-c1">// Max input length allowed.</span>
<span class="tok-cp">#define TABSIZE 8       </span><span class="tok-c1">// 8 spaces for each tab size.</span>

<span class="tok-kt">int</span> <span class="tok-nf">entab</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLEN</span><span class="tok-p">];</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">get_line</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLEN</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">entab</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">);</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;len %d, line %s&quot;</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">entab</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span>
        <span class="tok-n">pos_src</span><span class="tok-p">,</span>
        <span class="tok-n">pos_dst</span><span class="tok-p">,</span>
        <span class="tok-n">pos_first_spc</span><span class="tok-p">,</span>
        <span class="tok-n">num_spc</span><span class="tok-p">;</span>

    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-o">++</span><span class="tok-n">num_spc</span><span class="tok-p">;</span>

            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">num_spc</span> <span class="tok-o">==</span> <span class="tok-n">TABSIZE</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-n">num_spc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
                <span class="tok-n">len</span> <span class="tok-o">-=</span> <span class="tok-p">(</span><span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>

                <span class="tok-n">pos_first_spc</span> <span class="tok-o">=</span> <span class="tok-n">i</span> <span class="tok-o">-</span> <span class="tok-p">(</span><span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
                <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_first_spc</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;#&#39;</span><span class="tok-p">;</span>

                <span class="tok-n">pos_src</span> <span class="tok-o">=</span> <span class="tok-n">pos_first_spc</span> <span class="tok-o">+</span> <span class="tok-n">TABSIZE</span><span class="tok-p">;</span>
                <span class="tok-k">do</span> <span class="tok-p">{</span>
                    <span class="tok-n">pos_dst</span> <span class="tok-o">=</span> <span class="tok-n">pos_src</span> <span class="tok-o">-</span> <span class="tok-p">(</span><span class="tok-n">TABSIZE</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">);</span>
                    <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_dst</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_src</span><span class="tok-p">];</span>
                <span class="tok-p">}</span> <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">pos_src</span><span class="tok-o">++</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">);</span>

                <span class="tok-c1">// Make i value go back to the position of the first space</span>
                <span class="tok-c1">// so that i++ on the end of the while loop just increments</span>
                <span class="tok-c1">// i and we restart everything from the next character.</span>
                <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">pos_first_spc</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-n">num_spc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">len</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercise_22_wrap_lines"><a class="link" href="#exercise_22_wrap_lines">Exercise 22 - wrap lines</a></h3>
<div class="paragraph">
<p>Why does strtol returns a long integer but I can store it in an int and the compiler doesn&#8217;t complain.
<a href="http://stackoverflow.com/questions/13652556/what-happens-when-i-assign-long-int-to-int-in-c">http://stackoverflow.com/questions/13652556/what-happens-when-i-assign-long-int-to-int-in-c</a></p>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/22-wrap.c">./exercises/chap01/22-wrap.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-22. Write a program to ``fold&#39;&#39; long input lines into two or more</span>
<span class="tok-c1">// shorter lines after the last non-blank character that occurs before the n-th</span>
<span class="tok-c1">// column of input. Make sure your program does something intelligent with very</span>
<span class="tok-c1">// long lines, and if there are no blanks or tabs before the specified column.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;lib/helpers.h&quot;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 200</span>
<span class="tok-cp">#define WRAP_AT 20</span>

<span class="tok-kt">int</span> <span class="tok-nf">wrap</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[],</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">wrap_at</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">argv</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">wrap_at</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLEN</span><span class="tok-p">];</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">argc</span> <span class="tok-o">&lt;</span> <span class="tok-mi">2</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">wrap_at</span> <span class="tok-o">=</span> <span class="tok-n">WRAP_AT</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Since this an exercise, and on this machine ints and longs are</span>
        <span class="tok-c1">// of the same size, I will assume it will just work.</span>
        <span class="tok-c1">// http://stackoverflow.com/questions/13652556/what-happens-when-i-assign-long-int-to-int-in-c</span>
        <span class="tok-c1">// They say long to int conversion happens implicitly.</span>
        <span class="tok-c1">// NULL also worked compiling as c89.</span>
        <span class="tok-n">wrap_at</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-n">strtol</span><span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">argv</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">),</span> <span class="tok-nb">NULL</span><span class="tok-p">,</span> <span class="tok-mi">10</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">get_line</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLEN</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">wrap</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">wrap_at</span><span class="tok-p">);</span>
        <span class="tok-c1">//fprintf(stdout, &quot;len: %d, line: %s&quot;, len, line);</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%s&quot;</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-kt">int</span> <span class="tok-nf">wrap</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">input</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">wrap_at</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">input_i</span><span class="tok-p">,</span> <span class="tok-n">line_i</span><span class="tok-p">,</span> <span class="tok-n">pos_blank</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">len</span> <span class="tok-o">&lt;=</span> <span class="tok-n">wrap_at</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-n">len</span><span class="tok-p">;</span>

    <span class="tok-n">input_i</span> <span class="tok-o">=</span> <span class="tok-n">line_i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">pos_blank</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">input</span> <span class="tok-o">+</span> <span class="tok-n">input_i</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">input</span> <span class="tok-o">+</span> <span class="tok-n">input_i</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-o">||</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">input</span> <span class="tok-o">+</span> <span class="tok-n">input_i</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">pos_blank</span> <span class="tok-o">=</span> <span class="tok-n">input_i</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-c1">// If there is a \n at the end, we don&#39;t want to potentially</span>
        <span class="tok-c1">// consider it a character that should go on the &quot;next line&quot;.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">line_i</span> <span class="tok-o">&gt;=</span> <span class="tok-n">wrap_at</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">input</span> <span class="tok-o">+</span> <span class="tok-n">input_i</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">))</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">pos_blank</span> <span class="tok-o">&gt;</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">input</span> <span class="tok-o">+</span> <span class="tok-n">pos_blank</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">;</span>

                <span class="tok-c1">// The next &quot;sub line&quot; starts in this position now.</span>
                <span class="tok-n">input_i</span> <span class="tok-o">=</span> <span class="tok-n">pos_blank</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
            <span class="tok-k">else</span> <span class="tok-p">{</span>
                <span class="tok-c1">// Shift characters to the right.</span>
                <span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">shift_r</span><span class="tok-p">(</span><span class="tok-n">input</span><span class="tok-p">,</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-n">input_i</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
                <span class="tok-o">++</span><span class="tok-n">input_i</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
            <span class="tok-n">pos_blank</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
            <span class="tok-n">line_i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-o">++</span><span class="tok-n">line_i</span><span class="tok-p">;</span>
            <span class="tok-o">++</span><span class="tok-n">input_i</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">len</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exercise_23_remove_comments"><a class="link" href="#exercise_23_remove_comments">Exercise 23 - remove comments</a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-23. Write a program to remove all comments from a C program.</span>
<span class="tok-c1">// Don&#39;t forget to handle quoted strings and character constants properly. C</span>
<span class="tok-c1">// comments don&#39;t nest.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt; // Includes the standard INPUT/OUTPUT library.</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;lib/helpers.h&quot; /* Includes our own helper functions. */</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 200</span>

<span class="tok-cp">#define FALSE 0</span>
<span class="tok-cp">#define TRUE  1</span>

<span class="tok-cp">#define TYPE_CMT_NONE   0 </span><span class="tok-c1">// Not inside a comment at all.</span>
<span class="tok-cp">#define TYPE_CMT_SINGLE 1 </span><span class="tok-c1">// Inside a single line comment.</span>
<span class="tok-cp">#define TYPE_CMT_MULTI  2 </span><span class="tok-c1">// Inside a multi-line comment.</span>

<span class="tok-kt">void</span> <span class="tok-nf">remove_comments</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-kt">short</span><span class="tok-o">*</span> <span class="tok-n">type_cmt</span><span class="tok-p">,</span> <span class="tok-kt">short</span><span class="tok-o">*</span> <span class="tok-n">is_in_str</span> <span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">check_comment_start</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">check_comment_single_end</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">check_comment_multi_end</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">;</span>
    <span class="tok-kt">short</span> <span class="tok-n">is_in_str</span><span class="tok-p">,</span>
          <span class="tok-n">type_cmt</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">line</span><span class="tok-p">[</span><span class="tok-n">MAXLEN</span><span class="tok-p">];</span>

    <span class="tok-n">is_in_str</span> <span class="tok-o">=</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
    <span class="tok-n">type_cmt</span> <span class="tok-o">=</span> <span class="tok-n">TYPE_CMT_NONE</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">len</span> <span class="tok-o">=</span> <span class="tok-n">get_line</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-n">MAXLEN</span><span class="tok-p">))</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">remove_comments</span><span class="tok-p">(</span><span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">type_cmt</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">is_in_str</span><span class="tok-p">);</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%s&quot;</span><span class="tok-p">,</span> <span class="tok-n">line</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-cm">/*</span>
<span class="tok-cm"> * If pos_cmt is -1, we are not in a comment (and not in a multiline comment).</span>
<span class="tok-cm"> * If pos_cmt is 0, it means the privous line had a non-finished multiline</span>
<span class="tok-cm"> * comment so we know this next line is still part of a comment opened in</span>
<span class="tok-cm"> * the previous line.</span>
<span class="tok-cm"> */</span>

<span class="tok-kt">void</span> <span class="tok-nf">remove_comments</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">,</span> <span class="tok-kt">short</span><span class="tok-o">*</span> <span class="tok-n">type_cmt</span><span class="tok-p">,</span> <span class="tok-kt">short</span><span class="tok-o">*</span> <span class="tok-n">is_in_str</span> <span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">pos_cmt</span><span class="tok-p">;</span>

    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">pos_cmt</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">==</span> <span class="tok-n">TYPE_CMT_MULTI</span><span class="tok-p">)</span> <span class="tok-o">?</span> <span class="tok-mi">0</span> <span class="tok-o">:</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">is_in_str</span> <span class="tok-o">==</span> <span class="tok-n">TRUE</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&quot;&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-o">*</span><span class="tok-n">is_in_str</span> <span class="tok-o">=</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">pos_cmt</span> <span class="tok-o">==</span> <span class="tok-o">-</span><span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&quot;&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-o">*</span><span class="tok-n">is_in_str</span> <span class="tok-o">=</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span> <span class="tok-p">{</span>
            <span class="tok-c1">// Check if we are inside a comment of if one begins right now.</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">pos_cmt</span> <span class="tok-o">==</span> <span class="tok-o">-</span><span class="tok-mi">1</span>
                <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">=</span> <span class="tok-n">check_comment_start</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">))</span> <span class="tok-o">!=</span> <span class="tok-n">TYPE_CMT_NONE</span><span class="tok-p">)</span> <span class="tok-p">{</span>

                <span class="tok-n">pos_cmt</span> <span class="tok-o">=</span> <span class="tok-n">i</span><span class="tok-p">;</span>
                <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;@&#39;</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>

            <span class="tok-c1">// If we ARE inside a comment.</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">pos_cmt</span> <span class="tok-o">&gt;</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-p">{</span>

                <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">==</span> <span class="tok-n">TYPE_CMT_SINGLE</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">check_comment_single_end</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">))</span> <span class="tok-p">{</span>
                    <span class="tok-n">pos_cmt</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
                    <span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">=</span> <span class="tok-n">TYPE_CMT_NONE</span><span class="tok-p">;</span>
                <span class="tok-p">}</span>
                <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">==</span> <span class="tok-n">TYPE_CMT_MULTI</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">check_comment_multi_end</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">))</span> <span class="tok-p">{</span>
                    <span class="tok-n">pos_cmt</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
                    <span class="tok-o">*</span><span class="tok-n">type_cmt</span> <span class="tok-o">=</span> <span class="tok-n">TYPE_CMT_NONE</span><span class="tok-p">;</span>
                    <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;@&#39;</span><span class="tok-p">;</span>
                <span class="tok-p">}</span>

                <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;@&#39;</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>

        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">check_comment_start</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">)</span> <span class="tok-p">{</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">line</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;*&#39;</span><span class="tok-p">))</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">TYPE_CMT_MULTI</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">line</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">))</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">TYPE_CMT_SINGLE</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">TYPE_CMT_NONE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">check_comment_multi_end</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">line</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;*&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">line</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span><span class="tok-p">)</span>
        <span class="tok-k">return</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">check_comment_single_end</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">line</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">line</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span>
        <span class="tok-k">return</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/23-remove-comments.c">./exercises/chap01/23-remove-comments.c</a></p>
</div>
</div>
<div class="sect2">
<h3 id="exercise_24_check_syntax"><a class="link" href="#exercise_24_check_syntax">Exercise 24 - check syntax</a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 1-24. Write a program to check a C program for rudimentary syntax</span>
<span class="tok-c1">// errors like unmatched parentheses, brackets and braces. Don&#39;t forget about</span>
<span class="tok-c1">// quotes, both single and double, escape sequences, and comments. (This</span>
<span class="tok-c1">// program is hard if you do it in full generality.)</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#define MAXLEN 500</span>

<span class="tok-cp">#define FALSE 0</span>
<span class="tok-cp">#define TRUE  1</span>

<span class="tok-cp">#define STK_SIZE 100</span>

<span class="tok-c1">//</span>
<span class="tok-c1">// 0 - not in comment, not in string.</span>
<span class="tok-c1">// 1 - in single comment or in single quote constant character.</span>
<span class="tok-c1">// 2 - in multi line comment or in double quoted string.</span>
<span class="tok-c1">//</span>

<span class="tok-kt">short</span> <span class="tok-nf">chk_quot</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">quot</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">cmnt</span><span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">chk_cmnt</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">cmnt</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">quot</span><span class="tok-p">);</span>

<span class="tok-kt">short</span> <span class="tok-nf">is_opening_char</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">prev_quot</span><span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">is_closing_char</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">prev_quot</span><span class="tok-p">);</span>
<span class="tok-kt">short</span> <span class="tok-nf">is_match</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">opening</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">closing</span><span class="tok-p">);</span>

<span class="tok-kt">char</span> <span class="tok-nf">push</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">);</span>
<span class="tok-kt">char</span> <span class="tok-nf">pop</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">);</span>
<span class="tok-kt">char</span> <span class="tok-nf">top</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-nf">stack_dump</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">data_type</span><span class="tok-p">);</span>

<span class="tok-kt">void</span> <span class="tok-nf">print_error</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">unmatched</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">lnum</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// For storing the current and previous characters.</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span>
        <span class="tok-n">prev</span><span class="tok-p">,</span>
        <span class="tok-n">prev_quot</span><span class="tok-p">,</span>
        <span class="tok-n">lnum</span><span class="tok-p">;</span>

    <span class="tok-kt">short</span> <span class="tok-n">cmnt</span><span class="tok-p">,</span>         <span class="tok-c1">// Type of comment, none, single line or multiline.</span>
          <span class="tok-n">quot</span><span class="tok-p">;</span>         <span class="tok-c1">// Type of quote, none, single or double.</span>

    <span class="tok-kt">char</span> <span class="tok-n">stk_chars</span><span class="tok-p">[</span><span class="tok-n">STK_SIZE</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{[</span><span class="tok-mi">0</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">};</span>
    <span class="tok-kt">char</span> <span class="tok-n">stk_lnums</span><span class="tok-p">[</span><span class="tok-n">STK_SIZE</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">{[</span><span class="tok-mi">0</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">};</span>

    <span class="tok-n">cmnt</span> <span class="tok-o">=</span> <span class="tok-n">quot</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-n">lnum</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span><span class="tok-p">)</span> <span class="tok-o">++</span><span class="tok-n">lnum</span><span class="tok-p">;</span>

        <span class="tok-n">cmnt</span> <span class="tok-o">=</span> <span class="tok-n">chk_cmnt</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-n">cmnt</span><span class="tok-p">,</span> <span class="tok-n">quot</span><span class="tok-p">);</span> <span class="tok-c1">// 0, 1, 2</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">cmnt</span> <span class="tok-o">!=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
            <span class="tok-k">continue</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-n">quot</span> <span class="tok-o">=</span> <span class="tok-n">chk_quot</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-n">quot</span><span class="tok-p">,</span> <span class="tok-n">cmnt</span><span class="tok-p">);</span> <span class="tok-c1">// 0, 1, 2</span>

        <span class="tok-c1">// If we are already inside a string, just go one to the</span>
        <span class="tok-c1">// next iteration of the loop. If we are not inside a quote</span>
        <span class="tok-c1">// or it has just started (this is the opening quote char),</span>
        <span class="tok-c1">// we have to check the character.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">quot</span> <span class="tok-o">!=</span> <span class="tok-mi">0</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev_quot</span> <span class="tok-o">==</span> <span class="tok-n">quot</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-c1">//putchar(c);</span>
            <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
            <span class="tok-k">continue</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-c1">// Everything from here on relies on the two `continue`s</span>
        <span class="tok-c1">// from the tests above, since they &quot;continue&quot; if we are</span>
        <span class="tok-c1">// inside comments or in the middle of strings.</span>

        <span class="tok-c1">// Check if it is an &quot;opening&quot; thing.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">is_opening_char</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">prev_quot</span><span class="tok-p">))</span> <span class="tok-p">{</span>
            <span class="tok-n">push</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">stk_chars</span><span class="tok-p">);</span>
            <span class="tok-n">push</span><span class="tok-p">(</span><span class="tok-n">lnum</span><span class="tok-p">,</span> <span class="tok-n">stk_lnums</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>

        <span class="tok-c1">// Checks the c is a closing thing.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">is_closing_char</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">prev_quot</span><span class="tok-p">))</span> <span class="tok-p">{</span>

            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">is_match</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">top</span><span class="tok-p">(</span><span class="tok-n">stk_chars</span><span class="tok-p">)))</span> <span class="tok-p">{</span>
                <span class="tok-n">pop</span><span class="tok-p">(</span><span class="tok-n">stk_chars</span><span class="tok-p">);</span>
                <span class="tok-n">pop</span><span class="tok-p">(</span><span class="tok-n">stk_lnums</span><span class="tok-p">);</span>
            <span class="tok-p">}</span>
            <span class="tok-k">else</span> <span class="tok-p">{</span>
                <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">stk_chars</span> <span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                    <span class="tok-n">print_error</span><span class="tok-p">(</span><span class="tok-n">top</span><span class="tok-p">(</span><span class="tok-n">stk_chars</span><span class="tok-p">),</span> <span class="tok-n">top</span><span class="tok-p">(</span><span class="tok-n">stk_lnums</span><span class="tok-p">));</span>
                <span class="tok-p">}</span>
                <span class="tok-k">else</span> <span class="tok-p">{</span>
                    <span class="tok-n">print_error</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">lnum</span><span class="tok-p">);</span>
                <span class="tok-p">}</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>

        <span class="tok-n">prev</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
        <span class="tok-n">prev_quot</span> <span class="tok-o">=</span> <span class="tok-n">quot</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">stk_chars</span><span class="tok-o">&gt;</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">print_error</span><span class="tok-p">(</span><span class="tok-n">top</span><span class="tok-p">(</span><span class="tok-n">stk_chars</span><span class="tok-p">),</span> <span class="tok-n">top</span><span class="tok-p">(</span><span class="tok-n">stk_lnums</span><span class="tok-p">));</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-cm">/**</span>
<span class="tok-cm"> * Check if we are inside a quote or ended it.</span>
<span class="tok-cm"> */</span>
<span class="tok-kt">short</span> <span class="tok-nf">chk_quot</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">quot</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">cmnt</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// If we are inside a comment, we can&#39;t possibly be inside quotes.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">cmnt</span> <span class="tok-o">!=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// If we are inside single quote, check if it has ended.</span>
    <span class="tok-c1">// We make sure the previous char was not an escape.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">quot</span> <span class="tok-o">==</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\\&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\&#39;&#39;</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// If we are inside double quotes, check if it has ended.</span>
    <span class="tok-c1">// We make sure the previous char was not an escape.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">quot</span> <span class="tok-o">==</span> <span class="tok-mi">2</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\\&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&quot;&#39;</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// If we are inside double quotes, we shall not check if</span>
    <span class="tok-c1">// another quote has started, for instance.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">quot</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Otherwise, check if a quote has started.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\&#39;&#39;</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&quot;&#39;</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">2</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// This will be returned when we are in the middle of a quoted thing</span>
    <span class="tok-c1">// and we still did not find the end of it.</span>
    <span class="tok-c1">// Since we found no condition to update the type of quote,</span>
    <span class="tok-c1">// just return the current status as it was outside the function.</span>
    <span class="tok-k">return</span> <span class="tok-n">quot</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-cm">/**</span>
<span class="tok-cm"> * Check if we are inside a comment or ended it.</span>
<span class="tok-cm"> */</span>
<span class="tok-kt">short</span> <span class="tok-nf">chk_cmnt</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">prev</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">cmnt</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">quot</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// If we are in quotes, we can&#39;t possibly be inside a comment.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">quot</span> <span class="tok-o">!=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// If we are inside a single line comment, check if it has ended.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">cmnt</span> <span class="tok-o">==</span> <span class="tok-mi">1</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// If we are inside a multi line comment, check if it has ended.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">cmnt</span> <span class="tok-o">==</span> <span class="tok-mi">2</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;*&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// Only check for comment start if we are not already inside one.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">cmnt</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">// Otherwise check if a comment has started.</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">prev</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">prev</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;/&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;*&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">return</span> <span class="tok-mi">2</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// This will be returned when we are in the middle of a comment</span>
    <span class="tok-c1">// and we still did not find the end of it.</span>
    <span class="tok-c1">// Since we found no condition to update the type of comment,</span>
    <span class="tok-c1">// just return the current status as it was outside the function.</span>
    <span class="tok-k">return</span> <span class="tok-n">cmnt</span><span class="tok-p">;</span>
<span class="tok-p">}</span>


<span class="tok-kt">char</span> <span class="tok-nf">push</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">stack</span> <span class="tok-o">+</span> <span class="tok-o">++*</span><span class="tok-n">stack</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-n">c</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">char</span> <span class="tok-nf">pop</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">char</span> <span class="tok-n">top</span> <span class="tok-o">=</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">stack</span> <span class="tok-o">+</span> <span class="tok-o">*</span><span class="tok-n">stack</span><span class="tok-p">);</span>
    <span class="tok-o">--*</span><span class="tok-n">stack</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-n">top</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">char</span> <span class="tok-nf">top</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">stack</span> <span class="tok-o">+</span> <span class="tok-o">*</span><span class="tok-n">stack</span><span class="tok-p">);</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">stack_dump</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">stack</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">data_type</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;=</span> <span class="tok-o">*</span><span class="tok-n">stack</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">data_type</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%5c &quot;</span><span class="tok-p">,</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">stack</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">));</span>
        <span class="tok-k">else</span>
            <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%5d &quot;</span><span class="tok-p">,</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">stack</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">));</span>
    <span class="tok-p">}</span>

    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">is_opening_char</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">prev_quot</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&quot;&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev_quot</span> <span class="tok-o">!=</span> <span class="tok-mi">2</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\&#39;&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">prev_quot</span> <span class="tok-o">!=</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;(&#39;</span>
            <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;{&#39;</span>
            <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;[&#39;</span>
            <span class="tok-o">||</span> <span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&lt;&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">return</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">is_closing_char</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kt">short</span> <span class="tok-n">prev_quot</span><span class="tok-p">)</span> <span class="tok-p">{</span>

    <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-sc">&#39;&quot;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-mi">2</span> <span class="tok-o">==</span> <span class="tok-n">prev_quot</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-sc">&#39;\&#39;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-mi">1</span> <span class="tok-o">==</span> <span class="tok-n">prev_quot</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-sc">&#39;)&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span>
            <span class="tok-o">||</span> <span class="tok-sc">&#39;}&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span>
            <span class="tok-o">||</span> <span class="tok-sc">&#39;]&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span>
            <span class="tok-o">||</span> <span class="tok-sc">&#39;&gt;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">c</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-k">return</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">short</span> <span class="tok-nf">is_match</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">opening</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">closing</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(((</span><span class="tok-sc">&#39;&quot;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span> <span class="tok-o">||</span> <span class="tok-sc">&#39;\&#39;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span><span class="tok-p">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">closing</span> <span class="tok-o">==</span> <span class="tok-n">opening</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-sc">&#39;)&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">closing</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;(&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-sc">&#39;}&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">closing</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;{&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-sc">&#39;]&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">closing</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;[&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">||</span> <span class="tok-p">(</span><span class="tok-sc">&#39;&gt;&#39;</span> <span class="tok-o">==</span> <span class="tok-n">opening</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">closing</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;&lt;&#39;</span><span class="tok-p">))</span> <span class="tok-p">{</span>

        <span class="tok-k">return</span> <span class="tok-n">TRUE</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">FALSE</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">print_error</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">unmatched</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">lnum</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;Error: unmatched %c on line %d.</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">unmatched</span><span class="tok-p">,</span> <span class="tok-n">lnum</span><span class="tok-p">);</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap01/24-check-syntax.c">./exercises/chap01/24-check-syntax.c</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6_12_chapter_2_types_operators_and_expressions"><a class="link" href="#6_12_chapter_2_types_operators_and_expressions">[6/12] CHAPTER 2: Types, Operators, and Expressions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Words like short or long are known as 'quilifiers'.</p>
</div>
<div class="sect2">
<h3 id="2_1_variable_names"><a class="link" href="#2_1_variable_names">2.1 Variable Names</a></h3>

</div>
<div class="sect2">
<h3 id="2_2_data_types_and_sizes"><a class="link" href="#2_2_data_types_and_sizes">2.2 Data Types and Sizes</a></h3>

</div>
<div class="sect2">
<h3 id="exercise_01_limits"><a class="link" href="#exercise_01_limits">Exercise 01 - limits</a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-1. Write a program to determine the ranges of char , short , int,</span>
<span class="tok-c1">// and long variables, both signed and unsigned , by printing appropriate</span>
<span class="tok-c1">// values from standard headers and by direct computation. Harder if you</span>
<span class="tok-c1">// compute them: determine the ranges of the various floating-point types.</span>

<span class="tok-c1">// Various floating point types:</span>
<span class="tok-c1">//   - float</span>
<span class="tok-c1">//   - double</span>
<span class="tok-c1">//   - long double</span>


<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;limits.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;float.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20d, %25s: %20d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsigned char min&quot;</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsigned char min&quot;</span><span class="tok-p">,</span> <span class="tok-n">UCHAR_MAX</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20d, %25s: %20d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed char max&quot;</span><span class="tok-p">,</span> <span class="tok-n">SCHAR_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed char min&quot;</span><span class="tok-p">,</span> <span class="tok-n">SCHAR_MAX</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20d, %25s: %20d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsigned int min&quot;</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsigned int max&quot;</span><span class="tok-p">,</span> <span class="tok-n">UINT_MAX</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20d, %25s: %20d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed int min&quot;</span><span class="tok-p">,</span> <span class="tok-n">INT_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed int max&quot;</span><span class="tok-p">,</span> <span class="tok-n">INT_MAX</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20ld, %25s: %20ld</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsinged long min&quot;</span><span class="tok-p">,</span> <span class="tok-mi">0L</span><span class="tok-p">,</span> <span class="tok-s">&quot;unsigned long max&quot;</span><span class="tok-p">,</span> <span class="tok-n">ULONG_MAX</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20ld, %25s: %20ld</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed long min&quot;</span><span class="tok-p">,</span> <span class="tok-n">LONG_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed long max&quot;</span><span class="tok-p">,</span> <span class="tok-n">LONG_MAX</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20e, %25s: %20e</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed float min&quot;</span><span class="tok-p">,</span> <span class="tok-n">FLT_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed long max&quot;</span><span class="tok-p">,</span> <span class="tok-n">FLT_MAX</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20e, %25s: %20e</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed double min&quot;</span><span class="tok-p">,</span> <span class="tok-n">DBL_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed double max&quot;</span><span class="tok-p">,</span> <span class="tok-n">DBL_MAX</span><span class="tok-p">);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%25s: %20Le, %25s: %20Le</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed long double min&quot;</span><span class="tok-p">,</span> <span class="tok-n">LDBL_MIN</span><span class="tok-p">,</span> <span class="tok-s">&quot;signed double max&quot;</span><span class="tok-p">,</span> <span class="tok-n">LDBL_MAX</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap02/01-limits.c">./exercises/chap02/01-limits.c</a></p>
</div>
</div>
<div class="sect2">
<h3 id="2_3_constants_and_enums"><a class="link" href="#2_3_constants_and_enums">2.3 Constants and Enums</a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">my_strlen</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">my_strlen</span><span class="tok-p">(</span><span class="tok-s">&quot;Linux&quot;</span><span class="tok-p">));</span>    <span class="tok-c1">// 5</span>
    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">my_strlen</span><span class="tok-p">(</span><span class="tok-s">&quot;ção&quot;</span><span class="tok-p">));</span>      <span class="tok-c1">// 5</span>
    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">my_strlen</span><span class="tok-p">(</span><span class="tok-s">&quot;@#$%/</span><span class="tok-se">\\</span><span class="tok-s">&quot;</span><span class="tok-p">));</span>  <span class="tok-c1">// 6</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">my_strlen</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">str</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">str</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">)</span>
        <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/01-strlen.c">./examples/chap02/01-strlen.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">my_strlen</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">enum</span> <span class="tok-n">mybool</span> <span class="tok-p">{</span> <span class="tok-n">NO</span><span class="tok-p">,</span> <span class="tok-n">YES</span> <span class="tok-p">};</span>

    <span class="tok-k">enum</span> <span class="tok-n">escapes</span> <span class="tok-p">{</span>
        <span class="tok-n">BELL</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\a&#39;</span><span class="tok-p">,</span>
        <span class="tok-n">BACKSPACE</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\b&#39;</span><span class="tok-p">,</span>
        <span class="tok-n">TAB</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\t&#39;</span><span class="tok-p">,</span>
        <span class="tok-n">NEWLINE</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">,</span>
        <span class="tok-n">VTAB</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\v&#39;</span><span class="tok-p">,</span>
        <span class="tok-n">RETURN</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\r&#39;</span>
    <span class="tok-p">};</span>

    <span class="tok-k">enum</span> <span class="tok-n">months</span> <span class="tok-p">{</span>
        <span class="tok-n">JAN</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-n">FEB</span><span class="tok-p">,</span> <span class="tok-n">MAR</span><span class="tok-p">,</span> <span class="tok-n">APR</span><span class="tok-p">,</span> <span class="tok-n">MAY</span><span class="tok-p">,</span> <span class="tok-n">JUN</span><span class="tok-p">,</span>
        <span class="tok-n">JUL</span><span class="tok-p">,</span> <span class="tok-n">AUG</span><span class="tok-p">,</span> <span class="tok-n">SEP</span><span class="tok-p">,</span> <span class="tok-n">OCT</span><span class="tok-p">,</span> <span class="tok-n">NOV</span><span class="tok-p">,</span> <span class="tok-n">DEC</span><span class="tok-p">};</span>
    <span class="tok-c1">// FEB = 2, MAR = 3, etc.</span>

    <span class="tok-c1">// Wee need enum mybool again to create a variable.</span>
    <span class="tok-k">enum</span> <span class="tok-n">mybool</span> <span class="tok-n">flag</span> <span class="tok-o">=</span> <span class="tok-n">YES</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">flag</span> <span class="tok-o">==</span> <span class="tok-n">YES</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;MAR: %d, DEC: %d%c&quot;</span><span class="tok-p">,</span> <span class="tok-n">MAR</span><span class="tok-p">,</span> <span class="tok-n">DEC</span><span class="tok-p">,</span> <span class="tok-n">NEWLINE</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/02-enums.c">./examples/chap02/02-enums.c</a></p>
</div>
</div>
<div class="sect2">
<h3 id="2_4_declarations"><a class="link" href="#2_4_declarations">2.4 Declarations</a></h3>

</div>
<div class="sect2">
<h3 id="2_5_arithmetic_operators"><a class="link" href="#2_5_arithmetic_operators">2.5 Arithmetic Operators</a></h3>
<div class="sect3">
<h4 id="example_leap_years_and_enums"><a class="link" href="#example_leap_years_and_enums">Example Leap Years and Enums</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</div></td><td class="code"><span></span><span class="tok-cm">/**</span>
<span class="tok-cm"> * We took the leap year and ‘remainder’ operator explanation</span>
<span class="tok-cm"> * and created this program and used enums as well just to practice.</span>
<span class="tok-cm"> *</span>
<span class="tok-cm"> * Test it like this:</span>
<span class="tok-cm"> *</span>
<span class="tok-cm"> *   $ for year in {1900..2020} ; do ./devel &quot;$year&quot; ; done</span>
<span class="tok-cm"> */</span>


<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdlib.h&gt;</span><span class="tok-cp"></span>

<span class="tok-k">enum</span> <span class="tok-n">mybool</span> <span class="tok-p">{</span> <span class="tok-n">NO</span><span class="tok-p">,</span> <span class="tok-n">YES</span> <span class="tok-p">};</span>

<span class="tok-k">enum</span> <span class="tok-n">mybool</span> <span class="tok-nf">is_leap_year</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">year</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">*</span><span class="tok-n">argv</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">year</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">argc</span> <span class="tok-o">!=</span> <span class="tok-mi">2</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stderr</span><span class="tok-p">,</span> <span class="tok-s">&quot;You need to pass the year number.</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// Assume the input is an integer.</span>
    <span class="tok-n">year</span> <span class="tok-o">=</span> <span class="tok-n">atoi</span><span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">argv</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">));</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">is_leap_year</span><span class="tok-p">(</span><span class="tok-n">year</span><span class="tok-p">))</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d is a leap year!</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">year</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d is not a leap year...</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">year</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-k">enum</span> <span class="tok-n">mybool</span> <span class="tok-nf">is_leap_year</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">year</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-p">(</span><span class="tok-n">year</span> <span class="tok-o">%</span> <span class="tok-mi">4</span> <span class="tok-o">==</span> <span class="tok-mi">0</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">year</span> <span class="tok-o">%</span> <span class="tok-mi">100</span> <span class="tok-o">!=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-o">||</span> <span class="tok-n">year</span> <span class="tok-o">%</span> <span class="tok-mi">400</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
        <span class="tok-o">?</span> <span class="tok-nl">YES</span>
        <span class="tok-p">:</span> <span class="tok-n">NO</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/03-leap-year-enums.c">./examples/chap02/03-leap-year-enums.c</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="2_6_relational_and_logical_operators"><a class="link" href="#2_6_relational_and_logical_operators">2.6 Relational and Logical Operators</a></h3>
<div class="sect3">
<h4 id="exercise_02_loop_no_ands_and_ors"><a class="link" href="#exercise_02_loop_no_ands_and_ors">Exercise 02 loop no ANDs and ORs</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-2. Write a loop equivalent to the for loop above without</span>
<span class="tok-c1">// using &amp;&amp; or ||.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">lim</span><span class="tok-p">;</span>
    <span class="tok-n">lim</span> <span class="tok-o">=</span> <span class="tok-mi">50</span><span class="tok-p">;</span>
    <span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-mi">50</span><span class="tok-p">];</span>

    <span class="tok-c1">//for (i = 0; i &lt; lim - 1 &amp;&amp; (c = getchar()) != &#39;\n&#39; &amp;&amp; c != EOF; ++i)</span>
    <span class="tok-c1">//    s[i] = c;</span>

    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">while</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">lim</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">==</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">break</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>

        <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;[%s]</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">s</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./exercises/chap02/02-loop-no-ands-ors.c">./exercises/chap02/02-loop-no-ands-ors.c</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="2_7_type_conversions"><a class="link" href="#2_7_type_conversions">2.7 Type Conversions</a></h3>
<div class="sect3">
<h4 id="example_atoi"><a class="link" href="#example_atoi">Example atoi</a></h4>
<div class="paragraph">
<p>We added some checking to convert negative numbers as well.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">myatoi</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[]);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Sum of %s an %s is %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span>
            <span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">],</span> <span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">],</span> <span class="tok-n">myatoi</span><span class="tok-p">(</span><span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">])</span> <span class="tok-o">+</span> <span class="tok-n">myatoi</span><span class="tok-p">(</span><span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">myatoi</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">acc</span><span class="tok-p">,</span> <span class="tok-n">sign_factor</span><span class="tok-p">;</span>

    <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">sign_factor</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;-&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">sign_factor</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span> <span class="tok-p">;</span> <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;9&#39;</span><span class="tok-p">;</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span>
        <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-mi">10</span> <span class="tok-o">*</span> <span class="tok-n">acc</span> <span class="tok-o">+</span> <span class="tok-p">(</span><span class="tok-n">s</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;0&#39;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-n">acc</span> <span class="tok-o">*</span> <span class="tok-n">sign_factor</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/04-atoi.c">./examples/chap02/04-atoi.c</a></p>
</div>
</div>
<div class="sect3">
<h4 id="example_case_conversion"><a class="link" href="#example_case_conversion">Example case conversion</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">mylower</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">);</span>
<span class="tok-kt">int</span> <span class="tok-nf">myupper</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">;</span>

    <span class="tok-k">while</span> <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">getchar</span><span class="tok-p">())</span> <span class="tok-o">!=</span> <span class="tok-n">EOF</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-c1">//putchar(mylower(c));</span>
        <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-n">myupper</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">));</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">mylower</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;A&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;Z&#39;</span><span class="tok-p">)</span>
        <span class="tok-k">return</span> <span class="tok-n">c</span> <span class="tok-o">+</span> <span class="tok-sc">&#39;a&#39;</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;A&#39;</span><span class="tok-p">;</span>

    <span class="tok-k">return</span> <span class="tok-n">c</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">myupper</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;a&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;z&#39;</span><span class="tok-p">)</span>
        <span class="tok-k">return</span> <span class="tok-n">c</span> <span class="tok-o">-</span> <span class="tok-p">(</span><span class="tok-sc">&#39;a&#39;</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;A&#39;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-n">c</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/05-case-conv.c">./examples/chap02/05-case-conv.c</a></p>
</div>
</div>
<div class="sect3">
<h4 id="example_pseudo_rrand"><a class="link" href="#example_pseudo_rrand">Example Pseudo-Rrand</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">int</span> <span class="tok-n">next</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>

<span class="tok-kt">int</span> <span class="tok-nf">myrand</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-nf">mysrand</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">seed</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;Random num: %d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myrand</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">myrand</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">lim</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">next</span> <span class="tok-o">=</span> <span class="tok-n">next</span> <span class="tok-o">*</span> <span class="tok-mi">1103515245</span> <span class="tok-o">+</span> <span class="tok-mi">12345</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-n">next</span> <span class="tok-o">/</span> <span class="tok-mi">65536</span><span class="tok-p">)</span> <span class="tok-o">%</span> <span class="tok-n">lim</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">mysrand</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">seed</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">next</span> <span class="tok-o">=</span> <span class="tok-n">seed</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="./examples/chap02/06-pseudo-rand.c">./examples/chap02/06-pseudo-rand.c</a></p>
</div>
</div>
<div class="sect3">
<h4 id="exercise_3_htoi"><a class="link" href="#exercise_3_htoi">Exercise 3 - htoi</a></h4>
<div class="paragraph">
<p><a href="./exercises/chap02/03-htoi.c">./exercises/chap02/03-htoi.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-3. Write a function htoi(s) , which converts a string of</span>
<span class="tok-c1">// hexadecimal digits (including an optional 0x or 0X ) into its equivalent</span>
<span class="tok-c1">// integer value. The allowable digits are 0 through 9 , a through f , and A</span>
<span class="tok-c1">// through F .</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&quot;./lib/helpers.h&quot;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">myhtoi</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">s</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">argc</span> <span class="tok-o">!=</span> <span class="tok-mi">2</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stderr</span><span class="tok-p">,</span> <span class="tok-s">&quot;Provied an hex string for conversion.</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>


    <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stdout</span><span class="tok-p">,</span> <span class="tok-s">&quot;%d %x</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">myhtoi</span><span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">argv</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)),</span> <span class="tok-n">myhtoi</span><span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">argv</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">myhtoi</span><span class="tok-p">(</span><span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">s</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">acc</span><span class="tok-p">;</span>
    <span class="tok-kt">short</span> <span class="tok-n">sign_factor</span><span class="tok-p">;</span>

    <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">sign_factor</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">s</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;-&#39;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
        <span class="tok-n">sign_factor</span> <span class="tok-o">=</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// The C standard guarantees that you one step before or after the</span>
    <span class="tok-c1">// pointer is always a valid pointer for comparison so we can</span>
    <span class="tok-c1">// safely test for the next position.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">s</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">s</span> <span class="tok-o">+</span> <span class="tok-n">i</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;x&#39;</span> <span class="tok-o">||</span> <span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">s</span> <span class="tok-o">+</span> <span class="tok-n">i</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-sc">&#39;X&#39;</span><span class="tok-p">))</span> <span class="tok-p">{</span>
        <span class="tok-n">i</span> <span class="tok-o">+=</span> <span class="tok-mi">2</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">for</span> <span class="tok-p">(;</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">mylower</span><span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-p">(</span><span class="tok-n">s</span> <span class="tok-o">+</span> <span class="tok-n">i</span><span class="tok-p">)))</span> <span class="tok-o">&amp;&amp;</span>
                <span class="tok-p">((</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;9&#39;</span><span class="tok-p">)</span>
             <span class="tok-o">||</span>  <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;a&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;f&#39;</span><span class="tok-p">));</span>
             <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>

        <span class="tok-c1">// Since it is an hex num, we multiply every position</span>
        <span class="tok-c1">// by 16 and not by 10.</span>
        <span class="tok-n">acc</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">&gt;=</span> <span class="tok-sc">&#39;0&#39;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">c</span> <span class="tok-o">&lt;=</span> <span class="tok-sc">&#39;9&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">?</span> <span class="tok-mi">16</span> <span class="tok-o">*</span> <span class="tok-n">acc</span> <span class="tok-o">+</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;0&#39;</span><span class="tok-p">)</span>
            <span class="tok-o">:</span> <span class="tok-mi">16</span> <span class="tok-o">*</span> <span class="tok-n">acc</span> <span class="tok-o">+</span> <span class="tok-p">(</span><span class="tok-n">c</span> <span class="tok-o">-</span> <span class="tok-sc">&#39;a&#39;</span> <span class="tok-o">+</span> <span class="tok-mi">10</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-n">sign_factor</span> <span class="tok-o">*</span> <span class="tok-n">acc</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="2_8_increment_and_decrement_operators"><a class="link" href="#2_8_increment_and_decrement_operators">2.8 Increment and Decrement Operators</a></h3>
<div class="paragraph">
<p>TODO Squeeze example missing, increment numbers.</p>
</div>
<div class="sect3">
<h4 id="exercise_4_sequeeze_s2_from_s1"><a class="link" href="#exercise_4_sequeeze_s2_from_s1">Exercise 4, sequeeze s2 from s1</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-4. Write an alternative version of squeeze(s1,s2) that deletes</span>
<span class="tok-c1">// each character in s1 that matches any character in the string s2 .</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cm">/* Delete all c from s. */</span>
<span class="tok-kt">void</span> <span class="tok-nf">squeeze</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">s2</span><span class="tok-p">[]);</span>

<span class="tok-cp">#define LIM 50</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">argc</span> <span class="tok-o">!=</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stderr</span><span class="tok-p">,</span> <span class="tok-s">&quot;Usage: squeze </span><span class="tok-se">\&quot;</span><span class="tok-s">input string</span><span class="tok-se">\&quot;</span><span class="tok-s"> </span><span class="tok-se">\&quot;</span><span class="tok-s">chars to remove</span><span class="tok-se">\&quot;\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// It is possible to modify the contents of argv.</span>
    <span class="tok-n">squeeze</span><span class="tok-p">(</span><span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">],</span> <span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]);</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]);</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">void</span> <span class="tok-nf">squeeze</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">s2</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">j</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">s2</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span> <span class="tok-n">k</span><span class="tok-o">++</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-n">j</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-n">s2</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">])</span> <span class="tok-p">{</span>
                <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">j</span><span class="tok-o">++</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">];</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
        <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">j</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="exercise_5_any"><a class="link" href="#exercise_5_any">Exercise 5, any</a></h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-5. Write the function any(s1,s2) , which returns the first</span>
<span class="tok-c1">// location in a string s1 where any character from the string s2 occurs, or -1</span>
<span class="tok-c1">// if s1 contains no characters from s2. (The standard library function</span>
<span class="tok-c1">// strpbrk does the same job but returns a pointer to the location.)</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">any</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">s2</span><span class="tok-p">[]);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-kt">char</span> <span class="tok-o">**</span><span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">argc</span> <span class="tok-o">!=</span> <span class="tok-mi">3</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">fprintf</span><span class="tok-p">(</span><span class="tok-n">stderr</span><span class="tok-p">,</span> <span class="tok-s">&quot;We need two arguments. Bailing out...</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">);</span>
        <span class="tok-k">return</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%d</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">any</span><span class="tok-p">(</span><span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">],</span> <span class="tok-n">argv</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]));</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">int</span> <span class="tok-nf">any</span><span class="tok-p">(</span><span class="tok-kt">char</span> <span class="tok-n">s1</span><span class="tok-p">[],</span> <span class="tok-kt">char</span> <span class="tok-n">s2</span><span class="tok-p">[])</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-p">,</span> <span class="tok-n">k</span><span class="tok-p">;</span>

    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span> <span class="tok-n">i</span><span class="tok-o">++</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">k</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">s2</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">]</span> <span class="tok-o">!=</span> <span class="tok-sc">&#39;\0&#39;</span><span class="tok-p">;</span> <span class="tok-n">k</span><span class="tok-o">++</span><span class="tok-p">)</span> <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">s1</span><span class="tok-p">[</span><span class="tok-n">i</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-n">s2</span><span class="tok-p">[</span><span class="tok-n">k</span><span class="tok-p">])</span> <span class="tok-p">{</span>
                <span class="tok-k">return</span> <span class="tok-n">i</span><span class="tok-p">;</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2_9_bitwise_operators"><a class="link" href="#2_9_bitwise_operators">2.9 Bitwise Operators</a></h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>    n = 5
    n = n &amp; 0177
    00000000 00000000 00000000 00000101    n
&amp;
    00000000 00000000 00000000 01111111    0177</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>    00000000 00000000 00000000 00000101    original n


    n = 037777777741
    k = 0177
    00000000 00000000 11111111 11100001    n
&amp;
    00000000 00000000 00000000 01111111    0177</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>00000000 00000000 00000000 01100001    n becomes 01100001</pre>
</div>
</div>
<div class="paragraph">
<p>Changes the first bit of the last octet from 1 to zero because the octal used in the bitewise and operation takes 7 bits, not 8.</p>
</div>
<div class="sect2">
<h3 id="getbits"><a class="link" href="#getbits">getbits</a></h3>
<div class="paragraph">
<p><a href="./examples/chap02/07-getbits.c">./examples/chap02/07-getbits.c</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</div></td><td class="code"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-cm">/**</span>
<span class="tok-cm"> * Gets n bits from position p.</span>
<span class="tok-cm"> */</span>
<span class="tok-kt">unsigned</span> <span class="tok-nf">getbits</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">p</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">n</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;%u</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-n">getbits</span><span class="tok-p">(</span><span class="tok-mi">4532</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-mi">4</span><span class="tok-p">));</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-kt">unsigned</span> <span class="tok-nf">getbits</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">p</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">n</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-p">(</span><span class="tok-n">x</span> <span class="tok-o">&gt;&gt;</span> <span class="tok-p">(</span><span class="tok-n">p</span> <span class="tok-o">+</span> <span class="tok-mi">1</span> <span class="tok-o">-</span> <span class="tok-n">n</span><span class="tok-p">))</span> <span class="tok-o">&amp;</span> <span class="tok-o">~</span><span class="tok-p">(</span><span class="tok-o">~</span><span class="tok-mi">0</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">n</span><span class="tok-p">);</span>
<span class="tok-p">}</span>

<span class="tok-cm">/*</span>
<span class="tok-cm"> * getbits: get n bits from position p</span>
<span class="tok-cm"> * Ex: getbits(4532, 2, 3) =&gt; 532</span>
<span class="tok-cm"> * Ex: getbits(4532, 3, 2) =&gt; 45</span>

<span class="tok-cm"> Algorithm description:</span>
<span class="tok-cm"> return (x &gt;&gt; (p + 1 - n)) &amp; ~(~0 &lt;&lt; n)</span>

<span class="tok-cm"> * Ex: getbits(4532, 3, 2) =&gt; 45</span>
<span class="tok-cm"> 4532 to binary =&gt; 0001000110110100</span>

<span class="tok-cm"> (x &gt;&gt; (p + 1 - n)) =&gt; (0001000110110100 &gt;&gt; 2) =&gt; 0000010001101101</span>
<span class="tok-cm"> ~(~0 &lt;&lt; n) =&gt; ~(1111111111111111 &lt;&lt; 2) =&gt; ~(1111111111111100) =&gt; 0000000000000011</span>

<span class="tok-cm"> 0000010001101101 &amp;</span>
<span class="tok-cm"> 0000000000000011</span>
<span class="tok-cm"> -------------------</span>
<span class="tok-cm"> 0000000000000001</span>
<span class="tok-cm"> */</span>

<span class="tok-cm">/*</span>
<span class="tok-cm">printf(&quot;%u\n&quot;, getbits(4532, 3, 4));</span>

<span class="tok-cm">return (x &gt;&gt; (p + 1 - n)) &amp; ~(~0 &lt;&lt; n)</span>

<span class="tok-cm">4532 to binary =&gt; x = 00010001 10110100</span>

<span class="tok-cm">x &gt;&gt; 3 + 1 - 4</span>
<span class="tok-cm">x &gt;&gt; 0</span>

<span class="tok-cm">step 1:</span>
<span class="tok-cm"> x = 00010001 10110100</span>
<span class="tok-cm">&amp;</span>
<span class="tok-cm">   ~(11111111 11111111 &lt;&lt; 4)</span>


<span class="tok-cm">step 2:</span>
<span class="tok-cm"> x = 00010001 10110100</span>
<span class="tok-cm">&amp;</span>
<span class="tok-cm">   ~(11111111 11110000)</span>

<span class="tok-cm">step 3:</span>
<span class="tok-cm"> x = 00010001 10110100</span>
<span class="tok-cm">&amp;</span>
<span class="tok-cm">     00000000 00001111</span>

<span class="tok-cm">step 4:</span>
<span class="tok-cm">     00010001 10110100 &amp;</span>
<span class="tok-cm">     00000000 00001111</span>
<span class="tok-cm">     -----------------</span>
<span class="tok-cm">     00000000000000100 = 4 in decimal.</span>

<span class="tok-cm">*/</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="exercises_2"><a class="link" href="#exercises_2">Exercises</a></h4>
<div class="sect4">
<h5 id="exercise_6_setbits"><a class="link" href="#exercise_6_setbits">Exercise 6 - setbits</a></h5>
<div class="paragraph">
<p>Write a function setbits(x, pos, len, y) that returns x with the n bits that begin at position p set to the rightmost n bits of y , leaving the other bits unchanged.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// The rightmost bit is at position zero.
x = 1010 1010
         --
pos = 3; len = 2
y = 0001 0110
           --
         ^
         12
-------------
    1010 1110
    // Positions 3 and 2 in x were set to 11 because 11 are the
    // n (2) rightmost bits in y.</pre>
</div>
</div>
<div class="paragraph">
<p>Implement this exercise.</p>
</div>
</div>
<div class="sect4">
<h5 id="invert_bits_at_specific_positions"><a class="link" href="#invert_bits_at_specific_positions">invert bits at specific positions</a></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</div></td><td class="code"><span></span><span class="tok-c1">// Exercise 2-6. Write a function setbits(x,p,n,y) that returns x with the n</span>
<span class="tok-c1">// bits that begin at position p set to the rightmost n bits of y, leaving</span>
<span class="tok-c1">// the other bits unchanged.</span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;stdio.h&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">unsigned</span> <span class="tok-nf">setbits</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-n">n1</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">pos</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-n">n2</span><span class="tok-p">);</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;setbits(%u, %d, %d, %u) =&gt; %u</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-mi">60</span><span class="tok-p">,</span> <span class="tok-mi">7</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">,</span> <span class="tok-n">setbits</span><span class="tok-p">(</span><span class="tok-mi">60</span><span class="tok-p">,</span> <span class="tok-mi">7</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">3</span><span class="tok-p">));</span>

    <span class="tok-n">putchar</span><span class="tok-p">(</span><span class="tok-sc">&#39;\n&#39;</span><span class="tok-p">);</span>

    <span class="tok-n">printf</span><span class="tok-p">(</span><span class="tok-s">&quot;setbits(%u, %d, %d, %u) =&gt; %u</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">,</span> <span class="tok-mi">252</span><span class="tok-p">,</span> <span class="tok-mi">7</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-n">setbits</span><span class="tok-p">(</span><span class="tok-mi">252</span><span class="tok-p">,</span> <span class="tok-mi">7</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">,</span> <span class="tok-mi">2</span><span class="tok-p">));</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span>

<span class="tok-cm">/* Decimal Example 1 */</span>
<span class="tok-cm">/* n1 =&gt; 0011 1100 =&gt; 60 */</span>
<span class="tok-cm">/* n2 =&gt; 0000 0011 =&gt; 3 */</span>

<span class="tok-cm">/* pos =&gt; 7   len =&gt; 2 */</span>
<span class="tok-cm">/* -------------------------- */</span>
<span class="tok-cm">/* n1 =&gt; 1111 1100 =&gt; 252 */</span>


<span class="tok-cm">/* Decimal Example 2 */</span>
<span class="tok-cm">/* n1 =&gt; 1111 1100 =&gt; 252 */</span>
<span class="tok-cm">/* n2 =&gt; 0000 0010 =&gt; 2 */</span>

<span class="tok-cm">/* pos =&gt; 7   len =&gt; 2 */</span>
<span class="tok-cm">/* -------------------------- */</span>
<span class="tok-cm">/* n1 =&gt; 1011 1100 =&gt; 188 */</span>

<span class="tok-kt">unsigned</span> <span class="tok-nf">setbits</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-n">n1</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">pos</span><span class="tok-p">,</span> <span class="tok-kt">int</span> <span class="tok-n">len</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-n">n2</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Create a number that is made of 1s exclusively, except for the digits</span>
    <span class="tok-c1">// in the positions that are going to be replaced in n1. For this purpose,</span>
    <span class="tok-c1">// we&#39;ll need to run and | operation.</span>
    <span class="tok-c1">// Example (suppose 8-bit numbers): if positions to be replaced are 6 and 5 (pos=6, len=2), we&#39;ll shift ~0 (1111 1111)</span>
    <span class="tok-c1">// pos+1 to the left, producing 1000 0000, then we make a second number shifting</span>
    <span class="tok-c1">// 1111 1111 pos+1-len to the left, then negating it, producing 0001 1111. Running</span>
    <span class="tok-c1">// and | operation between them, we get 1001 1111, a number that has 0 set</span>
    <span class="tok-c1">// to the exact positions that will be replaced in n1.</span>
    <span class="tok-kt">unsigned</span> <span class="tok-n">replacement</span> <span class="tok-o">=</span> <span class="tok-p">((</span><span class="tok-o">~</span><span class="tok-mi">0</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">pos</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-p">))</span> <span class="tok-o">|</span> <span class="tok-o">~</span><span class="tok-p">(</span><span class="tok-o">~</span><span class="tok-mi">0</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">pos</span> <span class="tok-o">+</span> <span class="tok-mi">1</span> <span class="tok-o">-</span> <span class="tok-n">len</span><span class="tok-p">)));</span>

    <span class="tok-c1">// Turn bits to be replaced in n1 into 0, so that we can replace them</span>
    <span class="tok-c1">// by simply running and or operation with the replacement digits</span>
    <span class="tok-n">n1</span> <span class="tok-o">=</span> <span class="tok-p">(</span><span class="tok-n">n1</span> <span class="tok-o">&amp;</span> <span class="tok-n">replacement</span><span class="tok-p">);</span>

    <span class="tok-c1">// Keep the last len characters in n2, while turning everything else into 0,</span>
    <span class="tok-c1">// then shift n2 (pos -1) digits to the left so that the last bits are in the</span>
    <span class="tok-c1">// correct position for the subsequent or operation</span>
    <span class="tok-n">n2</span> <span class="tok-o">=</span> <span class="tok-p">((</span><span class="tok-o">~</span><span class="tok-p">(</span><span class="tok-o">~</span><span class="tok-mi">0</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">len</span><span class="tok-p">)</span> <span class="tok-o">&amp;</span> <span class="tok-n">n2</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">pos</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">));</span>
    <span class="tok-k">return</span> <span class="tok-p">(</span><span class="tok-n">n1</span> <span class="tok-o">|</span> <span class="tok-n">n2</span><span class="tok-p">);</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="end"><a class="link" href="#end">End</a></h2>
<div class="sectionbody">
<style type='text/css'>
#toc ul { list-style-type: circle }
pre, pre > code { font-family: 'Source Code Pro', 'Ubuntu Mono', 'Anonymous Pro', monospace; }
.listingblock .pygments .tok-c1, .listingblock .pygments .tok-cm { font-style: normal; }
ul > li p { margin-bottom: 0; }
</style>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. The C Programming Language, page 22. The use '\n' in single quote, where they probably meant "\n" in double quote.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-01 10:56:51 BRT
</div>
</div>
</body>
</html>